"use strict";(self.webpackChunkkearisp=self.webpackChunkkearisp||[]).push([[752],{3752:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(2791),a=n(1614),r=n(9786),s=n(1889),o=n(6522),l=n(5464),c=n(184);const u=e=>{const{value:t,onChange:n,...a}=e,r=(0,i.useCallback)(((e,t)=>{n&&n(t)}),[n]);return(0,c.jsxs)(s.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,c.jsx)(s.ZP,{item:!0,width:50,children:t}),(0,c.jsx)(s.ZP,{item:!0,xs:!0,children:(0,c.jsx)(l.ZP,{...a,value:t,onChange:r})})]})},x=()=>{const[e,t]=(0,i.useState)(!0),[n,l]=(0,i.useState)(100),[x,g]=(0,i.useState)({x:0,y:0,z:0}),[m,v]=(0,i.useState)({x:0,y:0,z:1}),[h,P]=(0,i.useState)(0),[d,f]=(0,i.useState)(0),[b,y]=(0,i.useState)(0),C=(0,i.useRef)(null),k=(0,i.useRef)(null),p=(0,i.useRef)(),z=(0,i.useCallback)((e=>{if(!p.current)return;p.current.getCamera().setFov(e),l(e)}),[]),D=(0,i.useCallback)(((e,t)=>{if(e.z===t.z)return{x:0,y:0};const n=t.z/(t.z+e.z);return{x:n*(e.x-t.x),y:n*(e.y-t.y)}}),[x,m]),j=((0,i.useCallback)((e=>{if(!p.current)return;p.current.getCamera().setAngle(e),y(e)}),[]),(0,i.useCallback)((e=>{if(!p.current)return;p.current.getCamera().setDirection(e),v(e)}),[])),w=(0,i.useCallback)((e=>{if(!p.current)return;p.current.getCamera().setPosition(e),g(e)}),[]),Z=(0,i.useCallback)((e=>{if(!p.current)return;const t=p.current.getCamera();t.setPitch(e),P(e),v(t.getDirection())}),[]),L=(0,i.useCallback)((e=>{if(!p.current)return;const t=p.current.getCamera();t.setYaw(e),f(e),v(t.getDirection())}),[]),F=(0,i.useCallback)((e=>{if(!p.current)return;p.current.getCamera().activateDebug(),e.preventDefault(),e.stopPropagation()}),[]),E=(0,i.useCallback)((e=>{if(!p.current)return;const t=p.current,n=e=>{const n=t.getCamera();n.setDirectionFromAngles(Math.max(Math.min(n.getPitch()-.5*e.movementY,90),-90),n.getYaw()+.5*e.movementX),P(n.getPitch()),f(n.getYaw()),v(n.getDirection())},i=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)}),[]);return(0,i.useEffect)((()=>{if(!k.current)return;if(!e)return;const t=window.scene=p.current=new o.xs("svg"),i=t.getCamera();return i.setFov(n),i.setPosition(x),i.setDirection(m),i.setPitch(h),i.setYaw(d),t.run(k.current),t.add(new o.Xv(100,100,100),{x:-200,y:0,z:0}),t.add(new o.Xv(200,1,200),{x:-200,y:-51,z:0}),()=>{t.stop()}}),[e]),(0,i.useEffect)((()=>{const e=e=>{if(!p.current)return;const t=p.current,n=t.getCamera().getPosition();switch(e.key){case"ArrowUp":w({...n,z:n.z+1});break;case"ArrowDown":w({...n,z:n.z-1});break;case"ArrowLeft":w({...n,x:n.x+1});break;case"ArrowRight":w({...n,x:n.x-1});break;case"w":{const n=t.getCamera();n.setPosition({x:n.getPosition().x+n.getDirection().x,y:n.getPosition().y+n.getDirection().y,z:n.getPosition().z+n.getDirection().z}),g(n.getPosition()),e.preventDefault(),e.stopPropagation();break}case"a":{const n=t.getCamera();n.setPosition({x:n.getPosition().x+n.getDirectionLeft().x,y:n.getPosition().y+n.getDirectionLeft().y,z:n.getPosition().z+n.getDirectionLeft().z}),g(n.getPosition()),e.preventDefault(),e.stopPropagation();break}case"d":{const n=t.getCamera();n.setPosition({x:n.getPosition().x-n.getDirectionLeft().x,y:n.getPosition().y-n.getDirectionLeft().y,z:n.getPosition().z-n.getDirectionLeft().z}),g(n.getPosition()),e.preventDefault(),e.stopPropagation();break}case"s":{const n=t.getCamera();n.setPosition({x:n.getPosition().x-n.getDirection().x,y:n.getPosition().y-n.getDirection().y,z:n.getPosition().z-n.getDirection().z}),g(n.getPosition()),e.preventDefault(),e.stopPropagation();break}case"q":case"e":e.preventDefault(),e.stopPropagation()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[w]),(0,i.useEffect)((()=>{if(!C.current)return;const e=C.current,t=e.getContext("2d");if(!t)return;const n={x:-40,y:-20,z:-500},i=function(i,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FFFFFF";const s=D(i,n),o=D(a,n);t.strokeStyle=r,t.lineWidth=1,t.beginPath(),t.moveTo(e.width/2+s.x+n.x,e.height/2-(s.y+n.y)),t.lineTo(e.width/2+o.x+n.x,e.height/2-(o.y+n.y)),t.stroke(),t.closePath()};t.clearRect(0,0,e.width,e.height),i({x:-150,y:0,z:0},{x:150,y:0,z:0}),i({x:0,y:-150,z:0},{x:0,y:150,z:0}),i({x:0,y:0,z:-150},{x:0,y:0,z:150})}),[x,m]),(0,c.jsxs)(a.Z,{children:[(0,c.jsx)(r.Z,{checked:e,onChange:(e,n)=>{t(n)}}),(0,c.jsx)(u,{title:"FOV",min:0,max:200,value:n,onChange:z}),(0,c.jsx)(u,{min:-90,max:90,title:"Pitch",value:h,onChange:Z}),(0,c.jsx)(u,{min:-180,max:180,title:"Yaw",value:d,onChange:L}),(0,c.jsxs)(s.ZP,{container:!0,spacing:10,children:[(0,c.jsxs)(s.ZP,{container:!0,item:!0,xs:6,spacing:1,children:[(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-100,max:100,defaultValue:0,title:"Position X",marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],value:x.x,onChange:e=>{w({...x,x:e})}})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Y",value:x.y,onChange:e=>{w({...x,y:e})}})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Z",value:x.z,onChange:e=>{w({...x,z:e})}})})]}),(0,c.jsxs)(s.ZP,{container:!0,item:!0,xs:6,spacing:1,children:[(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction X",value:m.x,onChange:e=>{j({...m,x:e})}})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Y",value:m.y,onChange:e=>{j({...m,y:e})}})}),(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Z",value:m.z,onChange:e=>{j({...m,z:e})}})})]})]}),(0,c.jsx)(s.ZP,{container:!0,spacing:1,children:(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)("div",{style:{width:"100%",height:"300px"},ref:k,onContextMenu:F,onMouseDown:E})})})]})}}}]);
//# sourceMappingURL=752.9e4aed47.chunk.js.map