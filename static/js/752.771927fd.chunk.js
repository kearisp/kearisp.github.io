"use strict";(self.webpackChunkkearisp=self.webpackChunkkearisp||[]).push([[752],{3752:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(2791),r=n(1614),s=n(9786),i=n(1889),l=n(773),u=n(5464),c=n(184);const o=e=>{const{value:t,onChange:n,...r}=e,s=(0,a.useCallback)(((e,t)=>{n&&n(t)}),[n]);return(0,c.jsxs)(i.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,c.jsx)(i.ZP,{item:!0,width:50,children:t}),(0,c.jsx)(i.ZP,{item:!0,xs:!0,children:(0,c.jsx)(u.ZP,{...r,value:t,onChange:s})})]})},x=()=>{const[e,t]=(0,a.useState)(!0),[n,u]=(0,a.useState)(100),[x,m]=(0,a.useState)({x:0,y:0,z:0}),[h,v]=(0,a.useState)({x:1,y:0,z:0}),[d,g]=(0,a.useState)(0),[y,z]=(0,a.useState)(0),[b,C]=(0,a.useState)(0),k=(0,a.useRef)(null),f=(0,a.useRef)(null),P=(0,a.useRef)(),j=(0,a.useCallback)((e=>{if(!P.current)return;P.current.getCamera().setFov(e),u(e)}),[]),w=(0,a.useCallback)(((e,t)=>{if(e.z===t.z)return{x:0,y:0};const n=t.z/(t.z+e.z);return{x:n*(e.x-t.x),y:n*(e.y-t.y)}}),[x,h]),Z=((0,a.useCallback)((e=>{if(!P.current)return;P.current.getCamera().setAngle(e),C(e)}),[]),(0,a.useCallback)((e=>{if(!P.current)return;P.current.getCamera().setDirection(e),v(e)}),[])),p=(0,a.useCallback)((e=>{if(!P.current)return;P.current.getCamera().setPosition(e),m(e)}),[]),D=(0,a.useCallback)((e=>{if(!P.current)return;const t=P.current.getCamera();t.setPitch(e),g(e),v(t.getDirection())}),[]),F=(0,a.useCallback)((e=>{if(!P.current)return;const t=P.current.getCamera();t.setYaw(e),z(e),v(t.getDirection())}),[]),E=((0,a.useCallback)(((e,t)=>{let n=Math.PI/180*45,a=Math.cos(n),r=Math.sin(n),s=[[a+t.x**2*(1-a),t.x*t.y*(1-a)-t.z*r,t.x*t.z*(1-a)+t.y*r],[t.y*t.x*(1-a)+t.z*r,a+t.y**2*(1-a),t.y*t.z*(1-a)-t.x*r],[t.z*t.x*(1-a)-t.y*r,t.z*t.y*(1-a)+t.x*r,a+t.z**2*(1-a)]];return{x:s[0][0]*e.x+s[0][1]*e.y+s[0][2]*e.z,y:s[1][0]*e.x+s[1][1]*e.y+s[1][2]*e.z,z:s[2][0]*e.x+s[2][1]*e.y+s[2][2]*e.z}}),[h]),(0,a.useCallback)((()=>{if(!P.current)return;const e=P.current,t=t=>{const n=e.getCamera();n.setDirectionFromAngles(Math.max(Math.min(n.getPitch()-.5*t.movementY,90),-90),n.getYaw()+.5*t.movementX),g(n.getPitch()),z(n.getYaw()),v(n.getDirection())},n=()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}),[]));return(0,a.useEffect)((()=>{if(!f.current)return;const e=window.scene=P.current=new l.xs("svg"),t=e.getCamera();return t.setFov(n),t.setPosition(x),t.setDirection(h),e.run(f.current),e.add(new l.Xv(100,100,100),{x:0,y:0,z:0}),e.add(new l.Xv(200,1,200),{x:0,y:-51,z:0}),()=>{e.stop()}}),[]),(0,a.useEffect)((()=>{const e=e=>{if(!P.current)return;const t=P.current.getCamera().getPosition();switch(e.key){case"ArrowUp":p({...t,z:t.z+1});break;case"ArrowDown":p({...t,z:t.z-1});break;case"ArrowLeft":p({...t,x:t.x+1});break;case"ArrowRight":p({...t,x:t.x-1})}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[p]),(0,a.useEffect)((()=>{if(!k.current)return;const e=k.current,t=e.getContext("2d");if(!t)return;const n={x:-40,y:-20,z:-500},a=function(a,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FFFFFF";const i=w(a,n),l=w(r,n);t.strokeStyle=s,t.lineWidth=1,t.beginPath(),t.moveTo(e.width/2+i.x+n.x,e.height/2-(i.y+n.y)),t.lineTo(e.width/2+l.x+n.x,e.height/2-(l.y+n.y)),t.stroke(),t.closePath()};t.clearRect(0,0,e.width,e.height),a({x:-150,y:0,z:0},{x:150,y:0,z:0}),a({x:0,y:-150,z:0},{x:0,y:150,z:0}),a({x:0,y:0,z:-150},{x:0,y:0,z:150})}),[x,h]),(0,c.jsxs)(r.Z,{children:[(0,c.jsx)(s.Z,{checked:e,onChange:(e,n)=>{t(n)}}),(0,c.jsx)(o,{title:"FOV",min:0,max:200,value:n,onChange:j}),(0,c.jsx)(o,{min:-90,max:90,title:"Pitch",value:d,onChange:D}),(0,c.jsx)(o,{min:-180,max:180,title:"Yaw",value:y,onChange:F}),(0,c.jsxs)(i.ZP,{container:!0,spacing:10,children:[(0,c.jsxs)(i.ZP,{container:!0,item:!0,xs:6,spacing:1,children:[(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(o,{min:-100,max:100,defaultValue:0,title:"Position X",marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],value:x.x,onChange:e=>{p({...x,x:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(o,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Y",value:x.y,onChange:e=>{p({...x,y:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(o,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Z",value:x.z,onChange:e=>{p({...x,z:e})}})})]}),(0,c.jsxs)(i.ZP,{container:!0,item:!0,xs:6,spacing:1,children:[(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(o,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction X",value:h.x,onChange:e=>{Z({...h,x:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(o,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Y",value:h.y,onChange:e=>{Z({...h,y:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(o,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Z",value:h.z,onChange:e=>{Z({...h,z:e})}})})]})]}),(0,c.jsx)(i.ZP,{container:!0,spacing:1,children:(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)("div",{style:{width:"100%",height:"300px"},ref:f,onMouseDown:E})})})]})}}}]);
//# sourceMappingURL=752.771927fd.chunk.js.map