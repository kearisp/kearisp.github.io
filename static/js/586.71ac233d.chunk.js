"use strict";(self.webpackChunkkearisp=self.webpackChunkkearisp||[]).push([[586],{586:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(5043),i=a(579);const s=async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("service-worker.js");console.log("Service Worker registered with scope:",e.scope)}catch(e){console.error("Service Worker registration failed:",e)}},n=async()=>{if(!("serviceWorker"in navigator))return;const e=await navigator.serviceWorker.getRegistration("service-worker.js");e&&await e.unregister()},o=()=>{const e=(0,r.useCallback)((async()=>{var e;const t=await fetch("/never-demand-world.svg"),a=await t.blob(),r=URL.createObjectURL(a),i=await(async e=>new Promise(((t,a)=>{const r=new Image;r.onload=()=>{t(r)},r.onabort=()=>{a(null)},r.onerror=e=>{a(e)},r.src=e})))(r);console.log(i.width,i.height);const s=32767;let n=1;(i.width>s||i.height>s)&&(n=Math.min(s/i.width,s/i.height));const o=document.createElement("canvas");o.width=i.width*n,o.height=i.height*n;const c=o.getContext("2d");c.drawImage(i,0,0);const l=c.getImageData(0,0,o.width,o.height);null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"set-layer",v:3,imageData:l})}),[]),t=(0,r.useCallback)((async()=>{await fetch("/assets/map?x=1&y=1&z=1")}),[]);(0,r.useCallback)((async()=>{await n(),await s()}),[]);return(0,r.useEffect)((()=>{(async()=>{await e(),await t()})()}),[]),(0,i.jsxs)("div",{style:{width:"100%",height:"300px"},children:[(0,i.jsx)("button",{onClick:s,children:"Register"}),(0,i.jsx)("button",{onClick:n,children:"Unregister"}),(0,i.jsx)("button",{onClick:e,children:"Set layer"}),(0,i.jsx)("button",{onClick:t,children:"123"})]})}}}]);
//# sourceMappingURL=586.71ac233d.chunk.js.map