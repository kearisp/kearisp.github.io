"use strict";(self.webpackChunkkearisp=self.webpackChunkkearisp||[]).push([[811],{2811:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var i=n(2791),s=n(2787),a=n(697),r=n(1889),o=n(9786),c=n(9768),l=n(184);const u=e=>{const{value:t,onChange:n,...s}=e,a=(0,i.useCallback)(((e,t)=>{n&&n(t)}),[n]);return(0,l.jsxs)(r.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,l.jsx)(r.ZP,{item:!0,width:50,children:t}),(0,l.jsx)(r.ZP,{item:!0,xs:!0,children:(0,l.jsx)(c.ZP,{...s,value:t,onChange:a})})]})},x=(0,i.createContext)({isRunning:!1,setRunning(){},fov:100,setFov(){},pitch:0,setPitch(){},yaw:0,setYaw(){},direction:{x:1,y:0,z:0},setDirection(){},position:{x:0,y:0,z:0},setPosition(){}}),g=e=>{const{children:t}=e,[n,s]=(0,i.useState)(!0),[a,r]=(0,i.useState)(100),[o,c]=(0,i.useState)(0),[u,g]=(0,i.useState)(0),[v,m]=(0,i.useState)({x:0,y:0,z:0}),[d,P]=(0,i.useState)({x:0,y:0,z:1});return(0,l.jsx)(x.Provider,{value:{isRunning:n,setRunning:s,fov:a,setFov:r,pitch:o,setPitch:c,yaw:u,setYaw:g,direction:d,setDirection:P,position:v,setPosition:m},children:t})},v=()=>{const{isRunning:e,setRunning:t,fov:n,setFov:s,pitch:c,setPitch:g,yaw:v,setYaw:m,direction:d,setDirection:P,position:h,setPosition:f}=(0,i.useContext)(x),p=(0,i.useCallback)((()=>{t(!e)}),[e]),b=(0,i.useCallback)((e=>{f({...h,x:e})}),[h]),C=(0,i.useCallback)((e=>{f({...h,y:e})}),[h]),k=(0,i.useCallback)((e=>{f({...h,z:e})}),[h]),j=(0,i.useCallback)((e=>{P({...d,x:e})}),[d]),w=(0,i.useCallback)((e=>{P({...d,y:e})}),[d]),y=(0,i.useCallback)((e=>{P({...d,z:e})}),[d]);return(0,l.jsxs)(a.Z,{sx:{paddingLeft:2,paddingRight:2},children:[(0,l.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(o.Z,{checked:e,onChange:p})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u,{min:0,max:200,title:"FOV",value:n,onChange:s})})]}),(0,l.jsx)(u,{min:-90,max:90,title:"Pitch",value:c,onChange:g}),(0,l.jsx)(u,{min:-180,max:180,title:"Yaw",value:v,onChange:m}),(0,l.jsxs)(r.ZP,{container:!0,children:[(0,l.jsxs)(r.ZP,{container:!0,item:!0,xs:6,spacing:1,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position X",value:h.x,onChange:b})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Y",value:h.y,onChange:C})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Z",value:h.z,onChange:k})})]}),(0,l.jsxs)(r.ZP,{container:!0,item:!0,xs:6,spacing:1,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction X",value:d.x,onChange:j})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Y",value:d.y,onChange:w})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Z",value:d.z,onChange:y})})]})]})]})};var m=n(6522);const d=()=>{const e=(0,i.useRef)(null),t=(0,i.useRef)(),{isRunning:n,fov:s,pitch:a,yaw:r,direction:o}=(0,i.useContext)(x),c=(0,i.useCallback)((e=>{if(!t.current)return;t.current.getCamera().activateDebug(),e.preventDefault(),e.stopPropagation()}),[]),u=(0,i.useCallback)((()=>{if(!t.current)return;const e=e=>{if(!t.current)return;const n=t.current.getCamera();n.setDirectionFromAngles(n.getPitch()-.1*e.movementY,n.getYaw()+.1*e.movementX)},n=()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}),[]);return(0,i.useEffect)((()=>{if(!e.current)return;const n=t.current=new m.xs("canvas");n.add(new m.Xv(100,100,100),{x:0,y:0,z:-200});for(let e=-10;e<=10;e++)for(let t=-10;t<=10;t++)n.add(new m.Xv(200,1,200),{x:200*e,y:-1e3,z:200*t});return n.run(e.current),()=>{n.stop()}}),[]),(0,i.useEffect)((()=>{if(!e.current||!t.current)return;const i=t.current;n?i.run(e.current):i.stop()}),[n]),(0,i.useEffect)((()=>{if(!t.current)return;t.current.getCamera().setFov(s)}),[s]),(0,i.useEffect)((()=>{if(!t.current)return;t.current.getCamera().setPitch(a)}),[a]),(0,i.useEffect)((()=>{if(!t.current)return;t.current.getCamera().setYaw(r)}),[r]),(0,i.useEffect)((()=>{const e=e=>{if(!t.current)return;const n=t.current,i=n.getCamera();let s=i.getPosition();switch(e.key){case"ArrowUp":i.setPosition({...s,z:s.z+1});break;case"ArrowDown":i.setPosition({...s,z:s.z-1});break;case"ArrowLeft":i.setPosition({...s,x:s.x+1});break;case"ArrowRight":i.setPosition({...s,x:s.x-1});break;case"w":{const t=n.getCamera();t.setPosition({x:t.getPosition().x+t.getDirection().x,y:t.getPosition().y+t.getDirection().y,z:t.getPosition().z+t.getDirection().z}),e.preventDefault(),e.stopPropagation();break}case"a":{const t=n.getCamera();t.setPosition({x:t.getPosition().x+t.getDirectionLeft().x,y:t.getPosition().y+t.getDirectionLeft().y,z:t.getPosition().z+t.getDirectionLeft().z}),e.preventDefault(),e.stopPropagation();break}case"d":{const t=n.getCamera();t.setPosition({x:t.getPosition().x-t.getDirectionLeft().x,y:t.getPosition().y-t.getDirectionLeft().y,z:t.getPosition().z-t.getDirectionLeft().z}),e.preventDefault(),e.stopPropagation();break}case"s":{const t=n.getCamera();t.setPosition({x:t.getPosition().x-t.getDirection().x,y:t.getPosition().y-t.getDirection().y,z:t.getPosition().z-t.getDirection().z}),e.preventDefault(),e.stopPropagation();break}case"q":case"e":e.preventDefault(),e.stopPropagation()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),(0,l.jsx)("div",{ref:e,style:{width:"100%",height:"calc(100vh - 55px)"},onContextMenu:c,onMouseDown:u})},P=()=>{const[e,t]=(0,i.useState)(!1),n=(0,i.useCallback)((()=>{t(!1)}),[]);return(0,i.useEffect)((()=>{const e=e=>{"p"===e.key&&(t((e=>!e)),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),(0,l.jsxs)(g,{children:[(0,l.jsx)(s.ZP,{sx:{width:"40vw"},PaperProps:{sx:{width:"40vw",padding:2}},open:e,anchor:"left",onClose:n,children:(0,l.jsx)(v,{})}),(0,l.jsx)(d,{})]})}}}]);
//# sourceMappingURL=811.6e3300b5.chunk.js.map