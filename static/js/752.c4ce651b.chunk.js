"use strict";(self.webpackChunkkearisp=self.webpackChunkkearisp||[]).push([[752],{3752:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(2791),s=n(1614),l=n(9786),i=n(1889),x=n(9242),r=n(5464),c=n(184);const u=e=>{const{value:t,onChange:n,...s}=e,l=(0,a.useCallback)(((e,t)=>{n&&n(t)}),[n]);return(0,c.jsxs)(i.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,c.jsx)(i.ZP,{item:!0,width:50,children:t}),(0,c.jsx)(i.ZP,{item:!0,xs:!0,children:(0,c.jsx)(r.ZP,{...s,value:t,onChange:l})})]})},o=()=>{const[e,t]=(0,a.useState)(!0),[n,r]=(0,a.useState)(300),[o,h]=(0,a.useState)({x:0,y:0,z:0}),[y,m]=(0,a.useState)({x:0,y:0,z:1}),[d,v]=(0,a.useState)(0),[j,z]=(0,a.useState)(0),b=(0,a.useRef)(null),g=(0,a.useCallback)((e=>{r(e)}),[]),k=(0,a.useCallback)(((e,t)=>{if(e.z===t.z)return{x:0,y:0};const n=t.z/(t.z+e.z);return{x:n*(e.x-t.x),y:n*(e.y-t.y)}}),[o,y]),P=(0,a.useCallback)(((e,t)=>{const n=e*(Math.PI/180),a=t*(Math.PI/180),s={x:Math.sin(n)*Math.cos(a),y:Math.cos(n),z:Math.sin(n)*Math.sin(a)};m(s)}),[]),f=(0,a.useCallback)((e=>{P(e,j),v(e)}),[j]),C=(0,a.useCallback)((e=>{P(d,e),z(e)}),[d]),Z=(0,a.useCallback)(((e,t)=>{let n=Math.PI/180*45,a=Math.cos(n),s=Math.sin(n),l=[[a+t.x**2*(1-a),t.x*t.y*(1-a)-t.z*s,t.x*t.z*(1-a)+t.y*s],[t.y*t.x*(1-a)+t.z*s,a+t.y**2*(1-a),t.y*t.z*(1-a)-t.x*s],[t.z*t.x*(1-a)-t.y*s,t.z*t.y*(1-a)+t.x*s,a+t.z**2*(1-a)]];return{x:l[0][0]*e.x+l[0][1]*e.y+l[0][2]*e.z,y:l[1][0]*e.x+l[1][1]*e.y+l[1][2]*e.z,z:l[2][0]*e.x+l[2][1]*e.y+l[2][2]*e.z}}),[y]);return(0,a.useEffect)((()=>{const e=e=>{switch(e.key){case"ArrowUp":h((e=>({...e,y:e.y+1})));break;case"ArrowDown":h((e=>({...e,y:e.y-1})));break;case"ArrowLeft":h((e=>({...e,x:e.x+1})));break;case"ArrowRight":h((e=>({...e,x:e.x-1})))}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),(0,a.useEffect)((()=>{if(!b.current)return;const e=b.current,t=e.getContext("2d");if(!t)return;const n={x:0,y:0,z:0},a={x:200,y:-200,z:500},s=function(n,s){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FFFFFF";const i=k(n,a),x=k(s,a);t.strokeStyle=l,t.lineWidth=.5,t.beginPath(),t.moveTo(e.width/2+i.x+a.x,e.height/2-i.y-a.y),t.lineTo(e.width/2+x.x+a.x,e.height/2-x.y-a.y),t.stroke(),t.closePath()};t.clearRect(0,0,e.width,e.height),s({x:-100,y:0,z:0},{x:100,y:0,z:0}),s({x:0,y:-100,z:0},{x:0,y:100,z:0}),s({x:0,y:0,z:-100},{x:0,y:0,z:100}),s(n,o,"#FFFF00"),s(n,y,"#FF0000");s(n,Z(o,y),"#FF00FF")}),[o,y]),(0,a.useEffect)((()=>{if(!b.current)return;b.current;const e=b.current.getContext("2d");if(!e)return;y.z}),[y]),(0,c.jsxs)(s.Z,{children:[(0,c.jsx)(l.Z,{checked:e,onChange:(e,n)=>{t(n)}}),(0,c.jsx)(u,{title:"FOV",min:0,max:500,value:n,onChange:g}),(0,c.jsx)(u,{min:-360,max:360,title:"Azimuth",value:d,onChange:f}),(0,c.jsx)(u,{min:-360,max:360,title:"Polar",value:j,onChange:C}),(0,c.jsxs)(i.ZP,{container:!0,spacing:10,children:[(0,c.jsxs)(i.ZP,{container:!0,item:!0,xs:6,spacing:2,children:[(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-100,max:100,defaultValue:0,title:"Position X",marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],value:o.x,onChange:e=>{h({...o,x:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Y",value:o.y,onChange:e=>{h({...o,y:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-100,max:100,marks:[{label:"-100",value:-100},{label:"0",value:0},{label:"100",value:100}],title:"Position Z",value:o.z,onChange:e=>{h({...o,z:e})}})})]}),(0,c.jsxs)(i.ZP,{container:!0,item:!0,xs:6,spacing:2,children:[(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction X",value:y.x,onChange:e=>{m({...y,x:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Y",value:y.y,onChange:e=>{m({...y,y:e})}})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(u,{min:-1,max:1,step:.01,marks:[{label:"-1",value:-1},{label:"0",value:0},{label:"1",value:1}],title:"Direction Z",value:y.z,onChange:e=>{m({...y,z:e})}})})]})]}),(0,c.jsxs)(i.ZP,{container:!0,spacing:1,children:[(0,c.jsx)(i.ZP,{item:!0,xs:6,children:(0,c.jsx)("canvas",{ref:b,width:400,height:400})}),(0,c.jsx)(i.ZP,{item:!0,xs:3,display:"flex",justifyContent:"flex-end",children:(0,c.jsx)(x.c,{context:"svg",running:e,position:o,direction:y,fov:n})}),(0,c.jsx)(i.ZP,{item:!0,xs:3,children:(0,c.jsx)(x.c,{context:"canvas",running:e,position:o,direction:y,fov:n})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)("pre",{children:JSON.stringify({fov:n,position:o,direction:y},null,4)})})]})]})}}}]);
//# sourceMappingURL=752.c4ce651b.chunk.js.map