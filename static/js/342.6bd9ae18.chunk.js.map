{"version":3,"file":"static/js/342.6bd9ae18.chunk.js","mappings":"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","sources":["../packages/motor-js/lib/core/Context.js","../packages/motor-js/lib/core/Vector.js","../packages/motor-js/lib/core/Polygon2D.js","../packages/motor-js/lib/core/Polygon.js","../packages/motor-js/lib/core/BSPNode.js","../packages/motor-js/lib/context/CanvasContext.js","../packages/motor-js/lib/context/SVGContext.js","../packages/motor-js/lib/events/Observable.js","../packages/motor-js/lib/core/Camera.js","../packages/motor-js/lib/utils/calcCameraRotationMatrix.js","../packages/motor-js/lib/core/Model.js","../packages/motor-js/lib/utils/calcDirectionMatrix.js","../packages/motor-js/lib/core/Color.js","../packages/motor-js/lib/context/WebGLContext.js","../packages/motor-js/lib/core/DataProvider.js","../packages/motor-js/lib/core/Scene.js","../packages/motor-js/lib/shapes/Sphere.js","../packages/motor-js/lib/events/Dispatchable.js","../packages/motor-js/lib/shapes/Cube.js","hooks/useControl.ts","controls/ButtonGroupControl/index.tsx","controls/SliderControl/index.tsx","controls/SwitchControl/index.tsx","pages/PathBuilderPage/blocks/ConfigForm/index.tsx","pages/PathBuilderPage/blocks/ConfigProvider/index.tsx","pages/PathBuilderPage/models/Lines.ts","pages/PathBuilderPage/blocks/PathBuilder/index.tsx","pages/PathBuilderPage/index.tsx"],"sourcesContent":["var Context = /** @class */ (function () {\n    function Context() {\n        this.width = 0;\n        this.height = 0;\n        this.fov = 45;\n        this.models = [];\n        this.debug = false;\n    }\n    Context.prototype.setDebug = function (debug) {\n        this.debug = debug;\n    };\n    Context.prototype.getWidth = function () {\n        return this.width;\n    };\n    Context.prototype.getHeight = function () {\n        return this.height;\n    };\n    Context.prototype.setSizes = function (width, height) {\n        this.setWidth(width);\n        this.setHeight(height);\n    };\n    Context.prototype.setWidth = function (width) {\n        this.width = width;\n    };\n    Context.prototype.setHeight = function (height) {\n        this.height = height;\n    };\n    Context.prototype.getFov = function () {\n        return this.fov;\n    };\n    Context.prototype.setFov = function (fov) {\n        this.fov = fov;\n    };\n    Context.prototype.addModel = function (model) {\n        this.models.push(model);\n    };\n    Context.prototype.removeModel = function (model) {\n        this.models = this.models.filter(function (m) { return m !== model; });\n    };\n    return Context;\n}());\nexport { Context };\n","var Vector = /** @class */ (function () {\n    function Vector(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    Object.defineProperty(Vector.prototype, \"distance\", {\n        get: function () {\n            return Vector.distance(this);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Vector.prototype.set = function (point) {\n        this.x = point.x;\n        this.y = point.y;\n        this.z = point.z;\n        return this;\n    };\n    Vector.prototype.add = function (point) {\n        this.set(Vector.summary(this, point));\n        return this;\n    };\n    Vector.prototype.multiply = function (by) {\n        this.set(Vector.multiply(this, by));\n        return this;\n    };\n    Vector.prototype.sub = function (point) {\n        this.set(Vector.subtract(this, point));\n        return this;\n    };\n    Vector.prototype.normalize = function () {\n        var _a = Vector.normalize(this), x = _a.x, y = _a.y, z = _a.z;\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    };\n    Vector.prototype.toPoint = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z\n        };\n    };\n    Vector.fromPoint = function (point) {\n        return new Vector(point.x, point.y, point.z);\n    };\n    Vector.summary = function (a, b) {\n        return {\n            x: a.x + b.x,\n            y: a.y + b.y,\n            z: a.z + b.z\n        };\n    };\n    Vector.subtract = function (a, b) {\n        return {\n            x: a.x - b.x,\n            y: a.y - b.y,\n            z: a.z - b.z\n        };\n    };\n    Vector.cross = function (a, b) {\n        return {\n            x: a.y * b.z - a.z * b.y,\n            y: a.z * b.x - a.x * b.z,\n            z: a.x * b.y - a.y * b.x\n        };\n    };\n    Vector.distance = function (a) {\n        return Math.sqrt(Math.pow(a.x, 2) + Math.pow(a.y, 2) + Math.pow(a.z, 2));\n    };\n    Vector.distanceBetween = function (a, b) {\n        var v = Vector.subtract(b, a);\n        return Vector.distance(v);\n    };\n    Vector.normalize = function (a) {\n        var length = Math.sqrt(Math.pow(a.x, 2) + Math.pow(a.y, 2) + Math.pow(a.z, 2));\n        return {\n            x: a.x / length,\n            y: a.y / length,\n            z: a.z / length\n        };\n    };\n    Vector.magnitude = function (a) {\n        return Math.sqrt(Vector.dot(a, a));\n    };\n    Vector.angle = function (v1, v2) {\n        var mag1 = Vector.magnitude(v1), mag2 = Vector.magnitude(v2), dot = Vector.dot(v1, v2);\n        return Math.acos(dot / (mag1 * mag2));\n    };\n    Vector.multiply = function (a, by) {\n        return {\n            x: a.x * by,\n            y: a.y * by,\n            z: a.z * by\n        };\n    };\n    Vector.dot = function (a, b) {\n        return a.x * b.x + a.y * b.y + a.z * b.z;\n    };\n    Vector.intersectPlaneV1 = function (point, direction, v0, v1, v2) {\n        var EPSILON = 0.0000001;\n        var edge1 = Vector.subtract(v1, v0);\n        var edge2 = Vector.subtract(v2, v0);\n        var planeNormal = Vector.cross(edge1, edge2);\n        var denominator = Vector.dot(planeNormal, direction);\n        if (Math.abs(denominator) < EPSILON) {\n            return null;\n        }\n        var t = Vector.dot(planeNormal, Vector.subtract(v0, point)) / denominator;\n        if (t < 0) {\n            return null;\n        }\n        return Vector.summary(point, Vector.multiply(direction, t));\n    };\n    Vector.intersectPlaneV2 = function (point, direction, v0, v1, v2) {\n        var edge1 = Vector.subtract(v1, v0);\n        var edge2 = Vector.subtract(v2, v0);\n        var normal = Vector.cross(edge1, edge2);\n        // Розрахунок відстані до площини\n        var d = -Vector.dot(normal, v0);\n        var denom = Vector.dot(normal, direction);\n        // Перевірка, чи вектор паралельний площині\n        if (Math.abs(denom) < 1e-6) {\n            return null;\n        }\n        var t = -(Vector.dot(normal, point) + d) / denom;\n        return Vector.summary(point, Vector.multiply(direction, t));\n    };\n    Vector.intersectPolygon = function (point, direction, polygon) {\n        var d = -(Vector.dot(polygon.getNormal(), polygon.points[0]));\n        var t = -(Vector.dot(polygon.getNormal(), point) + d) / Vector.dot(polygon.getNormal(), direction);\n        if (isNaN(t) || !isFinite(t)) {\n            return null;\n        }\n        var intersectPoint = Vector.summary(Vector.multiply(direction, t), point);\n        if (isNaN(intersectPoint.x) || !isFinite(intersectPoint.x)) {\n            console.log(point, t, intersectPoint);\n            debugger;\n        }\n        for (var i = 0; i < polygon.points.length; i++) {\n            var p1 = polygon.points[i];\n            var p2 = polygon.points[(i + 1) % polygon.points.length];\n            var side1 = Vector.subtract(p2, p1);\n            var side2 = Vector.subtract(intersectPoint, p1);\n            var crossProduct = Vector.cross(side1, side2);\n            if (Vector.dot(polygon.getNormal(), crossProduct) <= 1) {\n                return null;\n            }\n        }\n        return intersectPoint;\n    };\n    Vector.areCoDirected = function (p1, p2) {\n        return Vector.areCoDirectedV2(p1, p2);\n    };\n    Vector.areCoDirectedV1 = function (pt1, pt2) {\n        // calculate ratios for each pair of coordinates\n        var ratioX = pt1.x / pt2.x;\n        var ratioY = pt1.y / pt2.y;\n        var ratioZ = pt1.z / pt2.z;\n        if (isNaN(ratioX) || isNaN(ratioY) || isNaN(ratioZ)) {\n            return false;\n        }\n        // check if each ratio is approximately equal to the other ratios (with epsilon precision)\n        var epsilon = Math.pow(10, -14);\n        if (Math.abs(ratioX - ratioY) > epsilon ||\n            Math.abs(ratioX - ratioZ) > epsilon ||\n            Math.abs(ratioY - ratioZ) > epsilon) {\n            return false;\n        }\n        // vectors are co-directed\n        return true;\n    };\n    Vector.getAngle = function (p1, p2) {\n        var dot = Vector.dot(p1, p2);\n        var d1 = Vector.distance(p1);\n        var d2 = Vector.distance(p2);\n        var cosAngle = dot / (d1 * d2);\n        return Math.acos(cosAngle) * (180 / Math.PI);\n    };\n    Vector.areCoDirectedV2 = function (p1, p2) {\n        var dot = Vector.dot(p1, p2);\n        var d1 = Vector.distance(p1);\n        var d2 = Vector.distance(p2);\n        var cosAngle = dot / (d1 * d2);\n        return cosAngle <= Math.cos(Math.PI / 180 * 90);\n    };\n    return Vector;\n}());\nexport { Vector };\n","var Polygon2D = /** @class */ (function () {\n    function Polygon2D(points) {\n        this.points = points;\n    }\n    Polygon2D.prototype.getCenter = function () {\n        if (!this.center) {\n            this.calcCenter();\n        }\n        return this.center;\n    };\n    Polygon2D.prototype.calcCenter = function () {\n        var center = {\n            x: 0,\n            y: 0\n        };\n        for (var i = 0; i < this.points.length; i++) {\n            center.x += this.points[i].x;\n            center.y += this.points[i].y;\n        }\n        this.center = {\n            x: center.x / this.points.length,\n            y: center.y / this.points.length\n        };\n    };\n    return Polygon2D;\n}());\nexport { Polygon2D };\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { Vector } from \"./Vector\";\nimport { Polygon2D } from \"./Polygon2D\";\nvar Polygon = /** @class */ (function () {\n    function Polygon(points, normal) {\n        this.points = points;\n        this.normal = !normal ? this.calcNormal() : normal;\n    }\n    Polygon.prototype.setId = function (id) {\n        this.id = id;\n    };\n    Polygon.prototype.intersects = function (polygon) {\n        var axes = __spreadArray(__spreadArray([], Polygon.getNormals(this.points), true), Polygon.getNormals(polygon.points), true);\n        for (var _i = 0, axes_1 = axes; _i < axes_1.length; _i++) {\n            var axis = axes_1[_i];\n            var projection1 = Polygon.projection(this.points, axis);\n            var projection2 = Polygon.projection(polygon.points, axis);\n            if (projection1.max < projection2.min || projection2.max < projection1.min) {\n                return false;\n            }\n            if (projection1.max === projection2.min || projection2.max === projection1.min) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Polygon.prototype.smooth = function () {\n        return [];\n    };\n    Polygon.prototype.getNormal = function () {\n        return this.normal;\n    };\n    Polygon.prototype.calcNormal = function () {\n        var normal = {\n            x: 0,\n            y: 0,\n            z: 0\n        };\n        for (var i = 0; i < this.points.length; i++) {\n            var p1 = this.points[i];\n            var p2 = this.points[(i + 1) % this.points.length];\n            var p3 = this.points[(i + 2) % this.points.length];\n            var vector1 = Vector.subtract(p1, p2);\n            var vector2 = Vector.subtract(p1, p3);\n            var cross = Vector.cross(vector1, vector2);\n            normal = Vector.summary(normal, cross);\n        }\n        return Vector.normalize({\n            x: normal.x / this.points.length,\n            y: normal.y / this.points.length,\n            z: normal.z / this.points.length\n        });\n    };\n    Polygon.prototype.getCenter = function () {\n        var center = {\n            x: 0,\n            y: 0,\n            z: 0\n        };\n        for (var i = 0; i < this.points.length; i++) {\n            center = Vector.summary(this.points[i], center);\n        }\n        return {\n            x: center.x / this.points.length,\n            y: center.y / this.points.length,\n            z: center.z / this.points.length,\n        };\n    };\n    Polygon.prototype.getVector1 = function () {\n        // return Vector.normalize(Vector.subtract(this.points[0], this.points[1]));\n        return Vector.normalize(Vector.cross(this.getNormal(), { x: 0, y: 0, z: -1 }));\n    };\n    Polygon.prototype.getVector2 = function () {\n        // return Vector.normalize(Vector.cross(this.getVector1(), this.getNormal()));\n        return Vector.normalize(Vector.cross(this.getNormal(), { x: 1, y: 0, z: 0 }));\n    };\n    Polygon.prototype.isInFront = function (polygon) {\n        var vector = Vector.subtract(polygon.getCenter(), this.getCenter());\n        return Vector.dot(this.getNormal(), vector) > 0;\n    };\n    Polygon.prototype.isOnSamePlane = function (p) {\n        var point = this.points[0];\n        if (!point) {\n            return false;\n        }\n        var normal = this.getNormal();\n        var dot = Vector.dot(Vector.subtract(p, point), normal);\n        return Math.abs(dot) < 0.0001;\n    };\n    Polygon.prototype.isContainPoint = function (p) {\n        return this.isContainPointV3(p);\n    };\n    Polygon.prototype.isContainPointV1 = function (p) {\n        var inside = false;\n        for (var i = 0; i < this.points.length; i++) {\n            var p1 = this.points[i];\n            var p2 = this.points[(i + 1) % this.points.length];\n            var p3 = this.points[(i + 2) % this.points.length];\n            var v0 = Vector.subtract(p3, p1);\n            var v1 = Vector.subtract(p2, p1);\n            var v2 = Vector.subtract(p, p1);\n            var dot00 = Vector.dot(v0, v0);\n            var dot01 = Vector.dot(v0, v1);\n            var dot02 = Vector.dot(v0, v2);\n            var dot11 = Vector.dot(v1, v1);\n            var dot12 = Vector.dot(v1, v2);\n            var invDenom = 1 / (dot00 * dot11 - dot01 * dot01);\n            var u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n            var v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n            if ((u >= 0) && (v >= 0) && (u + v < 1)) {\n                inside = true;\n                break;\n            }\n        }\n        return inside;\n    };\n    Polygon.prototype.isContainPointV2 = function (point) {\n        var sum = 0;\n        for (var i = 0; i < this.points.length; i++) {\n            var a1 = this.points[i];\n            var a2 = this.points[(i + 1) % this.points.length];\n            var vector = Vector.subtract(a2, a1);\n            var t = Vector.dot(vector, Vector.subtract(point, a1)) / Vector.dot(vector, vector);\n            var epsilon = 0.000001;\n            if (t > epsilon && t < (1 - epsilon)) {\n                sum += Vector.angle(Vector.subtract(a2, point), Vector.subtract(a1, point));\n            }\n        }\n        return Math.abs(sum - Math.PI * 2) <= 0.01;\n    };\n    Polygon.prototype.isContainPointV3 = function (point) {\n        for (var i = 0; i < this.points.length; i++) {\n            var p1 = this.points[i];\n            var p2 = this.points[(i + 1) % this.points.length];\n            var side1 = Vector.subtract(p2, p1);\n            var side2 = Vector.subtract(point, p1);\n            var crossProduct = Vector.cross(side1, side2);\n            if (Vector.dot(this.getNormal(), crossProduct) <= -1) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Polygon.prototype.project = function (camera) {\n        var points = this.points.map(function (point) {\n            if (!camera) {\n                return {\n                    x: point.x,\n                    y: point.y\n                };\n            }\n            return camera.projectPoint(point);\n        }).filter(function (point) {\n            return !isNaN(point.x) && !isNaN(point.y);\n        });\n        return new Polygon2D(points);\n    };\n    Polygon.isIntersect = function (A, B) {\n        return false;\n    };\n    Polygon.intersect = function (A, B) {\n        var before = [];\n        var after = [];\n        var isBefore = true;\n        for (var i = 0; i < A.points.length; i++) {\n            var a1 = A.points[i];\n            var a2 = A.points[(i + 1) % A.points.length];\n            var vector = Vector.subtract(a2, a1);\n            if (isBefore) {\n                before.push(a1);\n            }\n            else {\n                after.push(a1);\n            }\n            for (var j = 0; j < B.points.length; j++) {\n                var b1 = B.points[j];\n                var b2 = B.points[(j + 1) % B.points.length];\n                var b3 = B.points[(j + 2) % B.points.length];\n                var intersectPoint = Vector.intersectPlaneV2(a1, vector, b1, b2, b3);\n                if (intersectPoint && Vector.distance(Vector.subtract(a1, intersectPoint)) < 0) {\n                    continue;\n                }\n                if (intersectPoint && A.isContainPoint(intersectPoint)) {\n                    // if(debug) {\n                    //     console.log(\"intersectPoint:\", intersectPoint);\n                    // }\n                    before.push(intersectPoint);\n                    after.push(intersectPoint);\n                    isBefore = !isBefore;\n                    break;\n                }\n            }\n        }\n        if (after.length === 0) {\n            return [A];\n        }\n        var ABefore = new Polygon(before);\n        ABefore.setId(\"\".concat(A.id, \".before\"));\n        ABefore.color = A.color;\n        var AAfter = new Polygon(after);\n        AAfter.setId(\"\".concat(A.id, \".after\"));\n        AAfter.color = A.color;\n        return [ABefore, AAfter];\n    };\n    Polygon.getNormals = function (points) {\n        var normals = [];\n        for (var i = 0; i < points.length; i++) {\n            var p1 = points[i];\n            var p2 = points[(i + 1) % points.length];\n            var edge = {\n                x: p2.x - p1.x,\n                y: p2.y - p1.y,\n                z: p2.z - p1.z\n            };\n            var normal = {\n                x: -edge.y,\n                y: edge.x,\n                z: edge.z\n            };\n            normals.push(normal);\n        }\n        return normals;\n    };\n    Polygon.projection = function (points, axis) {\n        var min = axis.x * points[0].x + axis.y * points[0].y;\n        var max = min;\n        for (var i = 1; i < points.length; i++) {\n            var p = axis.x * points[i].x + axis.y * points[i].y;\n            if (p < min) {\n                min = p;\n            }\n            else if (p > max) {\n                max = p;\n            }\n        }\n        return { min: min, max: max };\n    };\n    return Polygon;\n}());\nexport { Polygon };\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { Polygon } from \"./Polygon\";\nimport { Vector } from \"./Vector\";\nvar BSPNode = /** @class */ (function () {\n    function BSPNode(polygons, camera, debug) {\n        if (debug === void 0) { debug = false; }\n        this.debug = false;\n        this.camera = camera;\n        var front = [];\n        var back = [];\n        var _a = polygons.sort(function (a, b) {\n            // return Vector.distance(b.getCenter()) - Vector.distance(a.getCenter());\n            return Vector.distance(a.getCenter()) - Vector.distance(b.getCenter());\n        }), root = _a[0], rest = _a.slice(1);\n        this.root = root;\n        this.debug = debug;\n        for (var _i = 0, rest_1 = rest; _i < rest_1.length; _i++) {\n            var polygon = rest_1[_i];\n            var intersects = Polygon.intersect(polygon, root);\n            for (var _b = 0, intersects_1 = intersects; _b < intersects_1.length; _b++) {\n                var intersect = intersects_1[_b];\n                var type = this.classifyPolygon(intersect);\n                switch (type) {\n                    case \"front\":\n                        front.push(intersect);\n                        break;\n                    case \"back\":\n                        back.push(intersect);\n                        break;\n                    case \"coplanar\":\n                        // TODO\n                        if (this.debug) {\n                            console.log(type, this.root, intersect);\n                        }\n                        break;\n                }\n            }\n        }\n        this.front = front.length > 0 ? new BSPNode(front, camera, this.debug) : null;\n        this.back = back.length > 0 ? new BSPNode(back, camera, this.debug) : null;\n    }\n    BSPNode.prototype.classifyPolygon = function (polygon) {\n        return this.isInFront(polygon) ? \"front\" : \"back\";\n    };\n    BSPNode.prototype.isInFront = function (polygon) {\n        return this.isInFrontV1(polygon);\n        // return this.isInFrontV2(polygon);\n    };\n    BSPNode.prototype.isInFrontV1 = function (polygon) {\n        var vector = Vector.subtract(this.root.getCenter(), polygon.getCenter());\n        return Vector.dot(this.root.getNormal(), vector) < 0;\n    };\n    BSPNode.prototype.isInFrontV2 = function (polygon) {\n        var direction = {\n            x: 0,\n            y: 0,\n            z: -1\n        };\n        var viewVector = Vector.subtract(this.root.getCenter(), direction);\n        var normal = this.root.getNormal();\n        var dotProduct = Vector.dot(normal, viewVector);\n        var magnitudeProduct = Vector.magnitude(normal) * Vector.magnitude(viewVector);\n        var cosTheta = dotProduct / magnitudeProduct;\n        return cosTheta > 0;\n    };\n    BSPNode.prototype.traverse = function (direction, render) {\n        if (!this.root) {\n            return;\n        }\n        this.traverseV1(direction, render);\n        // this.traverseV2(direction, render);\n    };\n    BSPNode.prototype.traverseV1 = function (direction, render) {\n        if (Vector.dot(this.root.getNormal(), direction) < 0) {\n            if (this.front) {\n                this.front.traverseV1(direction, render);\n            }\n            render(this.root);\n            if (this.back) {\n                this.back.traverseV1(direction, render);\n            }\n        }\n        else {\n            if (this.back) {\n                this.back.traverseV1(direction, render);\n            }\n            render(this.root);\n            if (this.front) {\n                this.front.traverseV1(direction, render);\n            }\n        }\n    };\n    BSPNode.prototype.traverseV2 = function (direction, render) {\n        var frontFirst = Vector.dot(this.root.getNormal(), direction) < 0;\n        var v1 = this.root.getVector1();\n        var v2 = this.root.getVector2();\n        var p1 = Vector.multiply(v1, 100), p2 = Vector.multiply(v1, -100), p3 = Vector.summary(this.root.getCenter(), Vector.multiply(v2, -100)), p4 = Vector.summary(this.root.getCenter(), Vector.multiply(v2, 100));\n        var d1 = this.camera.projectPoint(p1), d2 = this.camera.projectPoint(p2), d3 = this.camera.projectPoint(p3), d4 = this.camera.projectPoint(p4);\n        var log = [\n            // \"\\n\", \"p1=\", {x: p1.x, y: p1.y},\n            // \"\\n\", \"p2=\", {x: p2.x, y: p2.y},\n            \"\\n\", \"p3=\", { x: p3.x, y: p3.y },\n            \"\\n\", \"p4=\", { x: p4.x, y: p4.y },\n            // \"\\n\", \"d1=\", d1,\n            // \"\\n\", \"d2=\", d2,\n            \"\\n\", \"d3=\", d3,\n            \"\\n\", \"d4=\", d4\n        ];\n        if (Math.abs(p3.x - p4.x) < 0.3 && p3.y > p4.y && d3.y < d4.y) {\n            if (this.debug) {\n                console.log.apply(console, __spreadArray([this.root.id, \"y changed 1\"], log, false));\n            }\n            frontFirst = !frontFirst;\n        }\n        if (frontFirst) {\n            if (this.front) {\n                this.front.traverseV2(direction, render);\n            }\n            render(this.root);\n            if (this.back) {\n                this.back.traverseV2(direction, render);\n            }\n        }\n        else {\n            if (this.back) {\n                this.back.traverseV2(direction, render);\n            }\n            render(this.root);\n            if (this.front) {\n                this.front.traverseV2(direction, render);\n            }\n        }\n    };\n    return BSPNode;\n}());\nexport { BSPNode };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Context } from \"../core/Context\";\nimport { BSPNode } from \"../core/BSPNode\";\nvar CanvasContext = /** @class */ (function (_super) {\n    __extends(CanvasContext, _super);\n    function CanvasContext() {\n        var _this = _super.call(this) || this;\n        _this.canvas = document.createElement(\"canvas\");\n        // @ts-ignore\n        _this.context = _this.canvas.getContext(\"2d\");\n        return _this;\n    }\n    Object.defineProperty(CanvasContext.prototype, \"domElement\", {\n        get: function () {\n            return this.canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CanvasContext.prototype.setWidth = function (width) {\n        _super.prototype.setWidth.call(this, width);\n        this.canvas.width = width;\n    };\n    CanvasContext.prototype.setHeight = function (height) {\n        _super.prototype.setHeight.call(this, height);\n        this.canvas.height = height;\n    };\n    CanvasContext.prototype.projectPoint = function (point) {\n        return {\n            x: NaN,\n            y: NaN\n        };\n    };\n    CanvasContext.prototype.setStrokeStyle = function (color) {\n        this.context.strokeStyle = color;\n    };\n    CanvasContext.prototype.setFillStyle = function (color) {\n        this.context.fillStyle = color;\n    };\n    CanvasContext.prototype.drawLine = function (start, end) {\n        this.context.lineWidth = 0.5;\n        this.context.beginPath();\n        this.context.moveTo(this.getWidth() / 2 + start.x, this.getHeight() / 2 - start.y);\n        this.context.lineTo(this.getWidth() / 2 + end.x, this.getHeight() / 2 - end.y);\n        this.context.stroke();\n        this.context.closePath();\n    };\n    CanvasContext.prototype.drawPolygon = function (polygon) {\n        // TODO\n    };\n    CanvasContext.prototype.fillRect = function (x, y, w, h) {\n        this.context.fillRect(x, y, w, h);\n    };\n    CanvasContext.prototype.fillPolygon = function (points) {\n        this.context.beginPath();\n        var start = points[0], rest = points.slice(1);\n        if (!start) {\n            return;\n        }\n        this.context.moveTo((start.x + 1) * this.getWidth() / 2, (1 - start.y) * this.getHeight() / 2);\n        for (var i = 0; i < rest.length; i++) {\n            this.context.lineTo((rest[i].x + 1) * this.getWidth() / 2, (1 - rest[i].y) * this.getHeight() / 2);\n        }\n        this.context.closePath();\n        this.context.stroke();\n        this.context.fill();\n    };\n    CanvasContext.prototype.clear = function () {\n        this.context.clearRect(0, 0, this.getWidth(), this.getHeight());\n    };\n    CanvasContext.prototype.render = function (models, camera) { };\n    CanvasContext.prototype.renderPolygons = function (polygons, camera) {\n        var _this = this;\n        var bspNode = new BSPNode(polygons, camera, false);\n        bspNode.traverse({ x: 0, y: 0, z: 1 }, function (polygon) {\n            _this.setStrokeStyle(\"#445555\");\n            _this.setFillStyle(polygon.color || \"#990000\");\n            _this.fillPolygon(polygon.project(camera).points);\n        });\n    };\n    return CanvasContext;\n}(Context));\nexport { CanvasContext };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Context } from \"../core/Context\";\nimport { BSPNode } from \"../core/BSPNode\";\nvar SVGContext = /** @class */ (function (_super) {\n    __extends(SVGContext, _super);\n    function SVGContext() {\n        var _this = _super.call(this) || this;\n        _this.strokeStyle = \"#FFFFFF\";\n        _this.fillStyle = \"#FFFFFF\";\n        _this.svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n        _this.svg.setAttribute(\"width\", \"100%\");\n        _this.svg.setAttribute(\"height\", \"100%\");\n        return _this;\n    }\n    Object.defineProperty(SVGContext.prototype, \"domElement\", {\n        get: function () {\n            return this.svg;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SVGContext.prototype.createSVGElement = function (type) {\n        return document.createElementNS(\"http://www.w3.org/2000/svg\", type);\n    };\n    SVGContext.prototype.setStrokeStyle = function (color) {\n        this.strokeStyle = color;\n    };\n    SVGContext.prototype.setFillStyle = function (color) {\n        this.fillStyle = color;\n    };\n    SVGContext.prototype.drawLine = function (start, end) {\n        var line = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n        line.setAttribute(\"x1\", \"\".concat(start.x));\n        line.setAttribute(\"y1\", \"\".concat(start.y));\n        line.setAttribute(\"x2\", \"\".concat(end.x));\n        line.setAttribute(\"y2\", \"\".concat(end.y));\n        line.setAttribute(\"stroke\", this.strokeStyle);\n        line.setAttribute(\"stroke-width\", \"1\");\n        this.svg.appendChild(line);\n    };\n    SVGContext.prototype.fillRect = function (x, y, w, h) {\n        var rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        rect.setAttribute(\"x\", \"\".concat(x));\n        rect.setAttribute(\"y\", \"\".concat(y));\n        rect.setAttribute(\"width\", \"\".concat(w));\n        rect.setAttribute(\"height\", \"\".concat(h));\n        rect.setAttribute(\"fill\", this.fillStyle);\n        this.svg.appendChild(rect);\n    };\n    SVGContext.prototype.fillPolygon = function (points) {\n        var _this = this;\n        var polygon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"polygon\");\n        polygon.setAttribute(\"style\", \"fill: \".concat(this.fillStyle));\n        polygon.setAttribute(\"points\", points.map(function (point) {\n            return \"\".concat((point.x + 1) * _this.width / 2, \",\").concat((1 - point.y) * _this.getHeight() / 2);\n        }).join(\" \"));\n        polygon.setAttribute(\"stroke-width\", \"0.9\");\n        polygon.setAttribute(\"stroke\", \"black\");\n        this.svg.append(polygon);\n    };\n    SVGContext.prototype.clear = function () {\n        while (this.svg.firstChild) {\n            this.svg.removeChild(this.svg.firstChild);\n        }\n    };\n    SVGContext.prototype.render = function (models, camera) {\n        //\n    };\n    SVGContext.prototype.renderPolygons = function (polygons, camera) {\n        var _this = this;\n        var bspNode = new BSPNode(polygons, camera, false);\n        bspNode.traverse({ x: 0, y: 0, z: 1 }, function (polygon) {\n            _this.setStrokeStyle(\"#445555\");\n            _this.setFillStyle(polygon.color || \"#990000\");\n            _this.fillPolygon(polygon.project(camera).points);\n        });\n    };\n    return SVGContext;\n}(Context));\nexport { SVGContext };\n","var Observable = /** @class */ (function () {\n    function Observable() {\n        this.listeners = {};\n    }\n    Observable.prototype.addEventListener = function (type, listener) {\n        if (!this.listeners[type]) {\n            this.listeners[type] = [];\n        }\n        this.listeners[type].push(listener);\n    };\n    Observable.prototype.removeEventListener = function (type, listener) {\n        if (this.listeners[type]) {\n            var index = this.listeners[type].indexOf(listener);\n            if (index !== -1) {\n                this.listeners[type].splice(index, 1);\n            }\n        }\n    };\n    Observable.prototype.emit = function (type, event) {\n        if (this.listeners[type]) {\n            this.listeners[type].forEach(function (listener) { return listener(event); });\n        }\n    };\n    return Observable;\n}());\nexport { Observable };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { mat4 } from \"gl-matrix\";\nimport { Vector } from \"./Vector\";\nimport { Observable } from \"../events/Observable\";\nimport { calcCameraRotationMatrixV2 } from \"../utils/calcCameraRotationMatrix\";\nvar Camera = /** @class */ (function (_super) {\n    __extends(Camera, _super);\n    function Camera(context, position, direction) {\n        if (position === void 0) { position = { x: 0, y: 0, z: 0 }; }\n        if (direction === void 0) { direction = { x: 0, y: 0, z: 1 }; }\n        var _this = _super.call(this) || this;\n        _this.context = context;\n        _this.isDebug = false;\n        _this.fov = 45;\n        _this.pitch = 0;\n        _this.yaw = 0;\n        _this.roll = 0;\n        _this.position = Vector.fromPoint(position);\n        _this.direction = Vector.fromPoint(direction);\n        _this.rotationMatrix = _this.calcDirectionMatrix();\n        return _this;\n    }\n    Camera.prototype.getPosition = function () {\n        return this.position;\n    };\n    Camera.prototype.setPosition = function (position) {\n        this.position.set(position);\n        this.rotationMatrix = this.calcDirectionMatrix();\n        this.emit(\"positionChange\", {\n            position: this.position\n        });\n    };\n    Camera.prototype.calcDirectionMatrix = function () {\n        return calcCameraRotationMatrixV2(this.position, this.direction);\n    };\n    Camera.prototype.getProjectionMatrix = function () {\n        var fieldOfView = (this.fov * Math.PI) / 180; // in radians\n        var aspect = this.context.getWidth() / this.context.getHeight();\n        var zNear = 0.1;\n        var zFar = 3000.0;\n        var projectionMatrix = mat4.create();\n        // note: glmatrix.js always has the first argument\n        // as the destination to receive the result.\n        mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\n        var matrix = [];\n        for (var i = 0; i < 4; i++) {\n            matrix[i] = [\n                projectionMatrix[i * 4],\n                projectionMatrix[i * 4 + 1],\n                projectionMatrix[i * 4 + 2],\n                projectionMatrix[i * 4 + 3]\n            ];\n        }\n        return matrix;\n    };\n    Camera.prototype.transformPointToCameraView = function (point) {\n        var matrix = this.rotationMatrix;\n        var x = point.x * matrix[0][0] + point.y * matrix[1][0] + point.z * matrix[2][0] + matrix[3][0];\n        var y = point.x * matrix[0][1] + point.y * matrix[1][1] + point.z * matrix[2][1] + matrix[3][1];\n        var z = point.x * matrix[0][2] + point.y * matrix[1][2] + point.z * matrix[2][2] + matrix[3][2];\n        // const w = point.x * matrix[0][3] + point.y * matrix[1][3] + point.z * matrix[2][3] + matrix[3][3];\n        var w = 1;\n        return {\n            x: x / w,\n            y: y / w,\n            z: z / w\n        };\n    };\n    Camera.prototype.projectPoint = function (point) {\n        var projected = this.projectPointV2(point);\n        if (Math.abs(projected.x) > 1 || Math.abs(projected.y) > 1 || Math.abs(projected.z) > 1) {\n            return {\n                x: NaN,\n                y: NaN,\n                z: NaN\n            };\n        }\n        return projected;\n    };\n    Camera.prototype.projectPointV1 = function (point) {\n        var x = point.x, y = point.y, z = point.z;\n        if (z / 3 <= -this.fov) {\n            return { x: NaN, y: NaN };\n        }\n        var scale = this.fov / (this.fov + z / 3);\n        // const scale = 1;\n        return {\n            x: scale * x,\n            y: scale * y\n        };\n    };\n    Camera.prototype.projectPointV2 = function (point) {\n        var matrix = this.getProjectionMatrix();\n        var x = point.x * matrix[0][0] + point.y * matrix[1][0] + point.z * matrix[2][0] + matrix[3][0];\n        var y = point.x * matrix[0][1] + point.y * matrix[1][1] + point.z * matrix[2][1] + matrix[3][1];\n        var z = point.x * matrix[0][2] + point.y * matrix[1][2] + point.z * matrix[2][2] + matrix[3][2];\n        var w = point.x * matrix[0][3] + point.y * matrix[1][3] + point.z * matrix[2][3] + matrix[3][3];\n        return {\n            x: x / w,\n            y: y / w,\n            z: z / w\n        };\n    };\n    Camera.prototype.getFov = function () {\n        return this.fov;\n    };\n    Camera.prototype.setFov = function (fov) {\n        this.fov = fov;\n        this.emit(\"fovChange\", {\n            fov: this.fov\n        });\n    };\n    Camera.prototype.setDebug = function (debug) {\n        this.isDebug = debug;\n    };\n    Camera.prototype.getDirection = function () {\n        return this.direction;\n    };\n    Camera.prototype.getDirectionLeft = function () {\n        return Vector.cross(this.direction, {\n            x: 0,\n            y: 1,\n            z: 0\n        });\n    };\n    Camera.prototype.setDirection = function (direction) {\n        this.direction.set(direction); //= Vector.normalize(direction);\n        this.rotationMatrix = this.calcDirectionMatrix();\n        this.emit(\"directionChange\", {\n            direction: this.direction,\n            pitch: this.pitch,\n            yaw: this.yaw\n        });\n    };\n    Camera.prototype.setDirectionFromAngles = function (pitch, yaw) {\n        this.pitch = Math.max(Math.min(pitch, 90), -90);\n        this.yaw = yaw;\n        var pitchRadians = this.pitch * (Math.PI / 180), yawRadians = this.yaw * (Math.PI / 180);\n        this.setDirection({\n            x: Math.cos(pitchRadians) * Math.sin(yawRadians),\n            y: Math.sin(pitchRadians),\n            z: Math.cos(pitchRadians) * Math.cos(yawRadians)\n        });\n    };\n    Camera.prototype.getPitch = function () {\n        // return Math.asin(this.direction.y) * (180 / Math.PI);\n        return this.pitch;\n    };\n    Camera.prototype.setPitch = function (pitch) {\n        this.setDirectionFromAngles(pitch, this.yaw);\n    };\n    Camera.prototype.getYaw = function () {\n        // return Math.atan2(this.direction.z, this.direction.x) * (180 / Math.PI);\n        return this.yaw;\n    };\n    Camera.prototype.setYaw = function (yaw) {\n        this.setDirectionFromAngles(this.pitch, yaw);\n    };\n    Camera.prototype.getRoll = function () {\n        return this.roll;\n    };\n    Camera.prototype.setRoll = function (roll) {\n        this.roll = roll;\n    };\n    return Camera;\n}(Observable));\nexport { Camera };\n","import { Vector } from \"../core/Vector\";\nexport var calcCameraRotationMatrixV1 = function (eye, center, up) {\n    var f = Vector.normalize(Vector.subtract(center, eye));\n    var s = Vector.normalize(Vector.cross(f, up));\n    var u = Vector.cross(s, f);\n    return [\n        [s.x, u.x, -f.x, 0],\n        [s.y, u.y, -f.y, 0],\n        [s.z, u.z, -f.z, 0],\n        [-Vector.dot(s, eye), -Vector.dot(u, eye), Vector.dot(f, eye), 1]\n    ];\n};\nexport var calcCameraRotationMatrixV2 = function (position, direction, up) {\n    if (up === void 0) { up = { x: 0, y: 1, z: 0 }; }\n    var right = Vector.normalize(Vector.cross(up, direction));\n    var newUp = Vector.normalize(Vector.cross(direction, right));\n    return [\n        [right.x, newUp.x, direction.x, position.x],\n        [right.y, newUp.y, direction.y, position.y],\n        [right.z, newUp.z, direction.z, position.z],\n        [0, 0, 0, 1]\n    ];\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Vector } from \"./Vector\";\nimport { Polygon } from \"./Polygon\";\nimport { Observable } from \"../events/Observable\";\nimport { calcDirectionMatrix } from \"../utils/calcDirectionMatrix\";\nvar Model = /** @class */ (function (_super) {\n    __extends(Model, _super);\n    function Model(position) {\n        var _this = _super.call(this) || this;\n        _this.scale = 1;\n        _this.rotation = 0;\n        _this.rotationDirection = { x: 0, y: 1, z: 0 };\n        _this.points = [];\n        _this.polygons = [];\n        _this.position = position || { x: 0, y: 0, z: 0 };\n        _this.rotationMatrix = _this.calcDirectionMatrix();\n        return _this;\n    }\n    Model.prototype.getId = function () {\n        return this.id;\n    };\n    Model.prototype.setId = function (id) {\n        this.id = id;\n    };\n    Model.prototype.getPosition = function () {\n        return this.position;\n    };\n    Model.prototype.setPosition = function (position) {\n        this.position = position;\n    };\n    Model.prototype.getPoints = function () {\n        var _this = this;\n        return this.points.map(function (point) {\n            return _this.getRotatedPoint(point);\n        });\n    };\n    Model.prototype.getPolygons = function () {\n        return this.polygons;\n    };\n    Model.prototype.getPolygons2 = function () {\n        var _this = this;\n        return this.polygons.map(function (indexes) {\n            var points = indexes.map(function (index) {\n                return _this.points[index];\n            });\n            return new Polygon(points);\n        });\n    };\n    Model.prototype.getScale = function () {\n        return this.scale;\n    };\n    Model.prototype.setScale = function (scale) {\n        this.scale = Math.min(Math.max(scale, 1), 0);\n    };\n    Model.prototype.setDirection = function (direction) {\n        this.rotationDirection = Vector.normalize(direction);\n        this.rotationMatrix = this.calcDirectionMatrix();\n    };\n    Model.prototype.rotate = function (angle, direction) {\n        this.rotation = angle;\n        if (direction) {\n            this.rotationDirection = Vector.normalize(direction);\n        }\n        this.rotationMatrix = this.calcDirectionMatrix();\n    };\n    Model.prototype.calcDirectionMatrix = function () {\n        return calcDirectionMatrix(this.rotationDirection, this.rotation);\n    };\n    Model.prototype.getRotatedPoint = function (point) {\n        return {\n            x: point.x * this.rotationMatrix[0][0] + point.y * this.rotationMatrix[0][1] + point.z * this.rotationMatrix[0][2],\n            y: point.x * this.rotationMatrix[1][0] + point.y * this.rotationMatrix[1][1] + point.z * this.rotationMatrix[1][2],\n            z: point.x * this.rotationMatrix[2][0] + point.y * this.rotationMatrix[2][1] + point.z * this.rotationMatrix[2][2]\n        };\n    };\n    return Model;\n}(Observable));\nexport { Model };\n","export var calcDirectionMatrix = function (direction, angle) {\n    var rotationAngle = angle * (Math.PI / 180);\n    var cosAngle = Math.cos(rotationAngle);\n    var sinAngle = Math.sin(rotationAngle);\n    return [\n        [\n            cosAngle + Math.pow(direction.x, 2) * (1 - cosAngle),\n            direction.x * direction.y * (1 - cosAngle) - direction.z * sinAngle,\n            direction.x * direction.z * (1 - cosAngle) + direction.y * sinAngle\n        ],\n        [\n            direction.y * direction.x * (1 - cosAngle) + direction.z * sinAngle,\n            cosAngle + Math.pow(direction.y, 2) * (1 - cosAngle),\n            direction.y * direction.z * (1 - cosAngle) - direction.x * sinAngle\n        ],\n        [\n            direction.z * direction.x * (1 - cosAngle) - direction.y * sinAngle,\n            direction.z * direction.y * (1 - cosAngle) + direction.x * sinAngle,\n            cosAngle + Math.pow(direction.z, 2) * (1 - cosAngle)\n        ]\n    ];\n};\n","var Color = /** @class */ (function () {\n    function Color() {\n    }\n    Color.parse = function (color) {\n        return Color.parseRgb(color)\n            || Color.parseHsl(color)\n            || Color.parseHsla(color)\n            || [1, 1, 1, 1];\n    };\n    Color.parseRgb = function (color) {\n        if (color[0] !== \"#\") {\n            return null;\n        }\n        return [\n            parseInt(color.slice(1, 3), 16) / 255,\n            parseInt(color.slice(3, 5), 16) / 255,\n            parseInt(color.slice(5, 7), 16) / 255,\n            1\n        ];\n    };\n    Color.parseHsl = function (color) {\n        var hslRegex = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/;\n        var match = color.match(hslRegex);\n        if (!match) {\n            return null;\n        }\n        var hue = parseInt(match[1]) / 60;\n        var saturation = parseInt(match[2]) / 100;\n        var lightness = parseInt(match[3]) / 100;\n        var c = (1 - Math.abs(2 * lightness - 1)) * saturation;\n        var x = c * (1 - Math.abs(hue % 2 - 1));\n        var m = lightness - c / 2;\n        var r = 0, g = 0, b = 0;\n        if (0 <= hue && hue < 1) {\n            r = c;\n            g = x;\n            b = 0;\n        }\n        else if (1 <= hue && hue < 2) {\n            r = x;\n            g = c;\n            b = 0;\n        }\n        else if (2 <= hue && hue < 3) {\n            r = 0;\n            g = c;\n            b = x;\n        }\n        else if (3 <= hue && hue < 4) {\n            r = 0;\n            g = x;\n            b = c;\n        }\n        else if (4 <= hue && hue < 5) {\n            r = x;\n            g = 0;\n            b = c;\n        }\n        else if (5 <= hue && hue < 6) {\n            r = c;\n            g = 0;\n            b = x;\n        }\n        return [r + m, g + m, b + m, 1];\n    };\n    Color.parseHsla = function (color) {\n        var hslaRegex = /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/;\n        var match = color.match(hslaRegex);\n        if (!match) {\n            return null;\n        }\n        var hue = parseInt(match[1]) / 60;\n        var saturation = parseInt(match[2]) / 100;\n        var lightness = parseInt(match[3]) / 100;\n        var alpha = parseFloat(match[4]);\n        var c = (1 - Math.abs(2 * lightness - 1)) * saturation;\n        var x = c * (1 - Math.abs(hue % 2 - 1));\n        var m = lightness - c / 2;\n        var r = 0, g = 0, b = 0;\n        if (0 <= hue && hue < 1) {\n            r = c;\n            g = x;\n            b = 0;\n        }\n        else if (1 <= hue && hue < 2) {\n            r = x;\n            g = c;\n            b = 0;\n        }\n        else if (2 <= hue && hue < 3) {\n            r = 0;\n            g = c;\n            b = x;\n        }\n        else if (3 <= hue && hue < 4) {\n            r = 0;\n            g = x;\n            b = c;\n        }\n        else if (4 <= hue && hue < 5) {\n            r = x;\n            g = 0;\n            b = c;\n        }\n        else if (5 <= hue && hue < 6) {\n            r = c;\n            g = 0;\n            b = x;\n        }\n        return [r + m, g + m, b + m, alpha];\n    };\n    return Color;\n}());\nexport { Color };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { mat4 } from \"gl-matrix\";\nimport { Context } from \"../core/Context\";\nimport { Color } from \"../core/Color\";\nvar WebGLContext = /** @class */ (function (_super) {\n    __extends(WebGLContext, _super);\n    function WebGLContext() {\n        var _this = _super.call(this) || this;\n        _this.canvas = document.createElement(\"canvas\");\n        var context = _this.canvas.getContext(\"webgl\");\n        if (!context) {\n            throw new Error();\n        }\n        _this.context = context;\n        _this.program = _this.initShaderProgram();\n        return _this;\n    }\n    Object.defineProperty(WebGLContext.prototype, \"domElement\", {\n        get: function () {\n            return this.canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    WebGLContext.prototype.initShaderProgram = function () {\n        var vertexShader = this.loadShader(this.context.VERTEX_SHADER, \"\\n            attribute vec4 aVertexPosition;\\n            attribute vec4 aVertexColor;\\n\\n            uniform mat4 uModelViewMatrix;\\n            uniform mat4 uProjectionMatrix;\\n\\n            varying lowp vec4 vColor;\\n\\n            void main(void) {\\n                gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\\n                vColor = aVertexColor;\\n            }\\n        \");\n        var fragmentShader = this.loadShader(this.context.FRAGMENT_SHADER, \"\\n            varying lowp vec4 vColor;\\n\\n            void main(void) {\\n                gl_FragColor = vColor;\\n            }\\n        \");\n        var shaderProgram = this.context.createProgram();\n        if (!shaderProgram) {\n            throw new Error(\"Failed to create program\");\n        }\n        this.context.attachShader(shaderProgram, vertexShader);\n        this.context.attachShader(shaderProgram, fragmentShader);\n        this.context.linkProgram(shaderProgram);\n        if (!this.context.getProgramParameter(shaderProgram, this.context.LINK_STATUS)) {\n            throw new Error(\"Failed to link program: \" + this.context.getProgramInfoLog(shaderProgram));\n        }\n        return shaderProgram;\n    };\n    WebGLContext.prototype.loadShader = function (type, source) {\n        var shader = this.context.createShader(type);\n        if (!shader) {\n            throw new Error(\"Failed to create shader\");\n        }\n        this.context.shaderSource(shader, source);\n        this.context.compileShader(shader);\n        if (!this.context.getShaderParameter(shader, this.context.COMPILE_STATUS)) {\n            throw new Error(\"Failed to compile shader: \" + this.context.getShaderInfoLog(shader));\n        }\n        return shader;\n    };\n    WebGLContext.prototype.setWidth = function (width) {\n        _super.prototype.setWidth.call(this, width);\n        this.canvas.width = width;\n    };\n    WebGLContext.prototype.setHeight = function (height) {\n        _super.prototype.setHeight.call(this, height);\n        this.canvas.height = height;\n    };\n    WebGLContext.prototype.clear = function () {\n        this.context.clearColor(0.0, 0.0, 0.0, 1.0); // Clear to black, fully opaque\n        this.context.clearDepth(1.0); // Clear everything\n        this.context.enable(this.context.DEPTH_TEST); // Enable depth testing\n        this.context.depthFunc(this.context.LEQUAL); // Near things obscure far things\n        // Clear the canvas before we start drawing on it.\n        this.context.clear(this.context.COLOR_BUFFER_BIT | this.context.DEPTH_BUFFER_BIT);\n        // this.updateV2();\n    };\n    WebGLContext.prototype.getModelViewMatrix = function (angle) {\n        var modelViewMatrix = mat4.create();\n        mat4.translate(modelViewMatrix, // destination matrix\n        modelViewMatrix, // matrix to translate\n        [-0.0, 0.0, -6.0]); // amount to translate\n        mat4.rotate(modelViewMatrix, // destination matrix\n        modelViewMatrix, // matrix to rotate\n        angle, // amount to rotate in radians\n        [0, 0, 1]); // axis to rotate around (Z)\n        mat4.rotate(modelViewMatrix, // destination matrix\n        modelViewMatrix, // matrix to rotate\n        angle * 0.7, // amount to rotate in radians\n        [0, 1, 0]); // axis to rotate around (Y)\n        mat4.rotate(modelViewMatrix, // destination matrix\n        modelViewMatrix, // matrix to rotate\n        angle * 0.3, // amount to rotate in radians\n        [1, 0, 0]); // axis to rotate around (X)\n        return modelViewMatrix;\n    };\n    WebGLContext.prototype.render = function (models, camera) {\n        //\n    };\n    WebGLContext.prototype.renderPolygons = function (polygons, camera) {\n        for (var _i = 0, polygons_1 = polygons; _i < polygons_1.length; _i++) {\n            var polygon = polygons_1[_i];\n            this.drawPolygon(polygon, camera);\n        }\n    };\n    WebGLContext.prototype.drawPolygon = function (polygon, camera) {\n        var positionBuffer = this.context.createBuffer();\n        var positions = polygon.points.map(function (point) {\n            return [point.x, point.y, point.z];\n        }).flat();\n        this.context.bindBuffer(this.context.ARRAY_BUFFER, positionBuffer);\n        this.context.bufferData(this.context.ARRAY_BUFFER, new Float32Array(positions), this.context.STATIC_DRAW);\n        var color = Color.parse(polygon.color || \"\");\n        if (this.debug) {\n            console.log(polygon.color, color);\n        }\n        var colors = polygon.points.map(function () {\n            return color;\n        }).flat();\n        var colorBuffer = this.context.createBuffer();\n        this.context.bindBuffer(this.context.ARRAY_BUFFER, colorBuffer);\n        this.context.bufferData(this.context.ARRAY_BUFFER, new Float32Array(colors), this.context.STATIC_DRAW);\n        var indexBuffer = this.context.createBuffer();\n        var indices = Array.from({ length: polygon.points.length }).map(function (_, index) {\n            return index;\n        });\n        this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), this.context.STATIC_DRAW);\n        this.context.bindBuffer(this.context.ARRAY_BUFFER, positionBuffer);\n        this.context.vertexAttribPointer(this.context.getAttribLocation(this.program, \"aVertexPosition\"), 3, this.context.FLOAT, false, 0, 0);\n        this.context.enableVertexAttribArray(this.context.getAttribLocation(this.program, \"aVertexPosition\"));\n        this.context.bindBuffer(this.context.ARRAY_BUFFER, colorBuffer);\n        this.context.vertexAttribPointer(this.context.getAttribLocation(this.program, \"aVertexColor\"), 4, this.context.FLOAT, false, 0, 0);\n        this.context.enableVertexAttribArray(this.context.getAttribLocation(this.program, \"aVertexColor\"));\n        this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        this.context.useProgram(this.program);\n        this.context.uniformMatrix4fv(this.context.getUniformLocation(this.program, \"uProjectionMatrix\"), false, new Float32Array(camera.getProjectionMatrix().flat()));\n        this.context.uniformMatrix4fv(this.context.getUniformLocation(this.program, \"uModelViewMatrix\"), false, this.getModelViewMatrix(0.0));\n        // polygon.points.map((point) => {});\n        // this.context.linkProgram(this.program);\n        // this.context.useProgram(this.program);\n        // const vertices = polygon.points.map(point => [point.x, point.y, point.z]).flat();\n        // const buffer = this.context.createBuffer();\n        // this.context.bindBuffer(this.context.ARRAY_BUFFER, buffer);\n        // this.context.bufferData(this.context.ARRAY_BUFFER, new Float32Array(vertices), this.context.STATIC_DRAW);\n        // this.context.bindBuffer(this.context.ARRAY_BUFFER, null);\n        // this.context.uniformMatrix4fv(this.context.getUniformLocation(this.program, \"uProjectionMatrix\"), false, this.projectionMatrix);\n        // const modelViewMatrix = mat4.create();\n        // mat4.rotate(modelViewMatrix, modelViewMatrix, 0, [0, 0, 1]);\n        // this.context.uniformMatrix4fv(\n        //     this.context.getUniformLocation(this.program, \"uModelViewMatrix\"),\n        //     false,\n        //     modelViewMatrix\n        //     // new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -6, 1])\n        // );\n        //\n        // const colorBuffer = this.context.createBuffer();\n        // this.context.bindBuffer(this.context.ARRAY_BUFFER, colorBuffer);\n        // this.context.bufferData(this.context.ARRAY_BUFFER, new Float32Array(polygon.points.map(() => [1, 1, 1, 1]).flat()), this.context.STATIC_DRAW);\n        // this.context.bindBuffer(this.context.ARRAY_BUFFER, null);\n        // this.context.bindBuffer(this.context.ARRAY_BUFFER, colorBuffer);\n        // this.context.vertexAttribPointer(this.context.getAttribLocation(this.program, \"aVertexColor\"), 4, this.context.FLOAT, false, 0, 0);\n        // this.context.enableVertexAttribArray(this.context.getAttribLocation(this.program, \"aVertexColor\"));\n        //\n        // this.context.bindBuffer(this.context.ARRAY_BUFFER, buffer);\n        // this.context.vertexAttribPointer(this.context.getAttribLocation(this.program, \"aVertexPosition\"), 3, this.context.FLOAT, false, 0, 0);\n        // this.context.enableVertexAttribArray(this.context.getAttribLocation(this.program, \"aVertexPosition\"));\n        //\n        // this.context.drawArrays(this.context.TRIANGLE_FAN, 0, polygon.points.length);\n        // this.context.drawElements(this.context.TRIANGLES, polygon.points.length, this.context.UNSIGNED_SHORT, 0);\n        {\n            var vertexCount = polygon.points.length;\n            this.context.drawElements(this.context.TRIANGLES, vertexCount, this.context.UNSIGNED_SHORT, 0);\n            this.context.viewport(0, 0, this.width, this.height);\n        }\n    };\n    return WebGLContext;\n}(Context));\nexport { WebGLContext };\n","var DataProvider = /** @class */ (function () {\n    function DataProvider() {\n        this.models = [];\n    }\n    DataProvider.prototype.getModels = function () {\n        return this.models;\n    };\n    DataProvider.prototype.addModel = function (model) {\n        this.models.push(model);\n    };\n    return DataProvider;\n}());\nexport { DataProvider };\n","import { SVGContext } from \"../context/SVGContext\";\nimport { CanvasContext } from \"../context/CanvasContext\";\nimport { WebGLContext } from \"../context/WebGLContext\";\nimport { Camera } from \"./Camera\";\nimport { DataProvider } from \"./DataProvider\";\nimport { Polygon } from \"./Polygon\";\nvar Scene = /** @class */ (function () {\n    function Scene(context) {\n        this.isLooping = false;\n        this.isDebug = false;\n        this.models = [];\n        switch (context) {\n            case \"svg\":\n                this.context = new SVGContext();\n                break;\n            case \"canvas\":\n                this.context = new CanvasContext();\n                break;\n            case \"webgl\":\n                this.context = new WebGLContext();\n                break;\n            default:\n                this.context = context;\n                break;\n        }\n        this.dataProvider = new DataProvider();\n        this.camera = new Camera(this.context);\n    }\n    Scene.prototype.getContext = function () {\n        return this.context;\n    };\n    Scene.prototype.getCamera = function () {\n        return this.camera;\n    };\n    Scene.prototype.requestPointerLock = function () {\n        this.context.domElement.requestPointerLock();\n    };\n    Scene.prototype.debug = function () {\n        this.isDebug = true;\n        this.camera.setDebug(true);\n        this.context.setDebug(true);\n    };\n    Scene.prototype.debugger = function () {\n        if (this.isDebug) {\n            this.isDebug = false;\n            this.camera.setDebug(false);\n            this.context.setDebug(false);\n            return true;\n        }\n        return this.isDebug;\n    };\n    Scene.prototype.update = function () {\n        var _this = this;\n        this.context.clear();\n        var polygons = this.models.map(function (model, modelIndex) {\n            var position = model.getPosition();\n            var points = model.getPoints();\n            return model.getPolygons().map(function (indexes, polygonIndex) {\n                var polygonPoints = indexes.map(function (index) {\n                    var point = points[index];\n                    return _this.camera.transformPointToCameraView({\n                        x: position.x + point.x - _this.camera.getPosition().x,\n                        y: position.y + point.y - _this.camera.getPosition().y,\n                        z: position.z + point.z - _this.camera.getPosition().z\n                    });\n                });\n                var polygon = new Polygon(polygonPoints);\n                polygon.setId(\"\".concat(model.getId(), \".\").concat(polygonIndex));\n                polygon.color = \"hsla(\".concat((modelIndex) * 100 + polygonIndex * 15, \", 100%, 50%, 0.4)\");\n                return polygon;\n            });\n        }).flat();\n        // this.context.render(this.models, this.camera);\n        this.context.renderPolygons(polygons, this.camera);\n        if (this.debugger())\n            debugger;\n    };\n    Scene.prototype.add = function (model, position, id) {\n        if (id) {\n            model.setId(id);\n        }\n        if (position) {\n            model.setPosition(position);\n        }\n        this.models.push(model);\n        this.context.addModel(model);\n        this.dataProvider.addModel(model);\n    };\n    Scene.prototype.remove = function (model) {\n        this.models = this.models.filter(function (m) {\n            return m !== model;\n        });\n        this.context.removeModel(model);\n    };\n    Scene.prototype.run = function (root) {\n        var _a = root.getBoundingClientRect(), width = _a.width, height = _a.height;\n        while (root.firstChild) {\n            root.removeChild(root.firstChild);\n        }\n        root.append(this.context.domElement);\n        this.context.setSizes(width, height);\n        if (!this.isLooping) {\n            this.isLooping = true;\n            this.loop();\n        }\n    };\n    Scene.prototype.stop = function () {\n        this.isLooping = false;\n    };\n    Scene.prototype.loop = function () {\n        var _this = this;\n        if (!this.isLooping) {\n            return;\n        }\n        window.requestAnimationFrame(function () {\n            _this.update();\n            _this.loop();\n        });\n    };\n    return Scene;\n}());\nexport { Scene };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Model } from \"../core/Model\";\nvar Sphere = /** @class */ (function (_super) {\n    __extends(Sphere, _super);\n    function Sphere(radius, position) {\n        var _this = _super.call(this, position) || this;\n        _this.radius = radius;\n        return _this;\n    }\n    return Sphere;\n}(Model));\nexport { Sphere };\n","var Dispatchable = /** @class */ (function () {\n    function Dispatchable() {\n        this.listeners = {};\n    }\n    Dispatchable.prototype.addEventListener = function (type, listener) {\n        if (!this.listeners[type]) {\n            this.listeners[type] = [];\n        }\n        this.listeners[type].push(listener);\n    };\n    Dispatchable.prototype.removeEventListener = function (type, listener) {\n        if (this.listeners[type]) {\n            var index = this.listeners[type].indexOf(listener);\n            if (index !== -1) {\n                this.listeners[type].splice(index, 1);\n            }\n        }\n    };\n    Dispatchable.prototype.dispatch = function (event) {\n        if (this.listeners[event.type]) {\n            this.listeners[event.type].forEach(function (listener) { return listener(event); });\n        }\n    };\n    return Dispatchable;\n}());\nexport { Dispatchable };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Model } from \"../core/Model\";\nvar Cube = /** @class */ (function (_super) {\n    __extends(Cube, _super);\n    function Cube(width, height, depth, position) {\n        var _this = _super.call(this, position) || this;\n        _this.width = width;\n        _this.height = height;\n        _this.depth = depth;\n        _this.points = [\n            { x: -width / 2, y: -height / 2, z: -depth / 2 }, // 0\n            { x: width / 2, y: -height / 2, z: -depth / 2 }, // 1\n            { x: width / 2, y: height / 2, z: -depth / 2 }, // 2\n            { x: -width / 2, y: height / 2, z: -depth / 2 }, // 3\n            { x: -width / 2, y: -height / 2, z: depth / 2 }, // 4\n            { x: width / 2, y: -height / 2, z: depth / 2 }, // 5\n            { x: width / 2, y: height / 2, z: depth / 2 }, // 6\n            { x: -width / 2, y: height / 2, z: depth / 2 } // 7\n        ];\n        _this.polygons = [\n            [0, 1, 2, 3],\n            [1, 2, 6, 5],\n            [4, 5, 6, 7],\n            [0, 4, 7, 3],\n            [7, 3, 2, 6],\n            [0, 1, 5, 4]\n        ];\n        return _this;\n    }\n    return Cube;\n}(Model));\nexport { Cube };\n","import {\n    useFormContext,\n    useController\n} from \"react-hook-form\";\n\n\ntype Props<P = unknown> = P & {\n    label?: string;\n    required?: boolean;\n    name: string;\n};\n\nexport const useControl = (props: Props) => {\n    const {\n        name\n    } = props;\n\n    const {\n        formState: {\n            isSubmitting\n        }\n    } = useFormContext();\n\n    const {\n        field\n    } = useController({\n        name\n    });\n\n    return {\n        field: {\n            ...field,\n            ...isSubmitting ? {disabled: true} : {}\n        }\n    };\n};\n\nexport {Props as ControlProps};\n","import React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport ButtonGroup from \"@mui/material/ButtonGroup\";\n\nimport {useControl, ControlProps} from \"src/hooks\";\n\n\ntype Props = ControlProps<{\n    options: {\n        disabled?: boolean;\n        label: string;\n        value: string;\n    }[];\n}>;\n\nconst ButtonGroupControl: React.FC<Props> = (props) => {\n    const {\n        label,\n        options,\n        name\n    } = props;\n\n    const {\n        field: {\n            disabled,\n            value,\n            onChange\n        }\n    } = useControl({\n        name\n    });\n\n    return (\n        <ButtonGroup\n          title={label}\n          disabled={disabled}>\n            {options.map((option, index) => {\n                return (\n                    <Button\n                      key={index}\n                      color={option.value === value ? \"success\" : \"info\"}\n                      disabled={option.disabled}\n                      value={option.value}\n                      onClick={() => onChange(option.value)}>\n                        {option.label}\n                    </Button>\n                );\n            })}\n        </ButtonGroup>\n    );\n};\n\n\nexport {ButtonGroupControl};\n","import React, {useCallback} from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport Slider, {SliderProps} from \"@mui/material/Slider\";\n\nimport {useControl, ControlProps} from \"src/hooks\";\n\n\ntype Props = ControlProps<{\n    label?: SliderProps[\"title\"];\n    marks?: SliderProps[\"marks\"];\n    min?: SliderProps[\"min\"];\n    max?: SliderProps[\"max\"];\n    step?: SliderProps[\"step\"];\n}>;\n\nconst SliderControl: React.FC<Props> = (props) => {\n    const {\n        required,\n        label,\n        marks,\n        min,\n        max,\n        step,\n        name\n    } = props;\n\n    const {\n        field: {\n            value = 0,\n            onChange\n        }\n    } = useControl({\n        required,\n        name\n    });\n\n    const handleChange = useCallback((e: Event, value: number | number[]) => {\n        onChange(value as number);\n    }, [onChange]);\n\n    return (\n        <Grid container spacing={1} alignItems=\"center\">\n            <Grid item container width={55} justifyContent=\"flex-end\">\n                <Grid item>\n                    {value.toFixed(2)}\n                </Grid>\n            </Grid>\n\n            <Grid item xs>\n                <Slider\n                  title={label}\n                  marks={marks}\n                  min={min}\n                  max={max}\n                  step={step}\n                  value={value}\n                  onChange={handleChange} />\n            </Grid>\n        </Grid>\n    );\n};\n\n\nexport {SliderControl};\n","import React, {useCallback, ChangeEvent} from \"react\";\nimport Switch from \"@mui/material/Switch\";\n\nimport {useControl, ControlProps} from \"src/hooks\";\n\n\ntype Props = ControlProps;\n\nconst SwitchControl: React.FC<Props> = (props) => {\n    const {\n        required,\n        name\n    } = props;\n\n    const {\n        field: {\n            value = false,\n            disabled,\n            ref,\n            onChange,\n            onBlur\n        }\n    } = useControl({\n        required,\n        name\n    });\n\n    const handleChange = useCallback((e: ChangeEvent, checked: boolean) => {\n        onChange(checked);\n    }, [onChange]);\n\n    return (\n        <Switch\n          ref={ref}\n          disabled={disabled}\n          checked={value}\n          onBlur={onBlur}\n          onChange={handleChange} />\n    );\n};\n\n\nexport {SwitchControl};\n","import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\n\nimport {\n    ButtonGroupControl,\n    SliderControl,\n    SwitchControl\n} from \"src/controls\";\n\n\nconst ConfigForm: React.FC = () => {\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs={12}>\n                <ButtonGroupControl\n                  label=\"Context\"\n                  options={[\n                    {label: \"SVG\", value: \"svg\"},\n                    {label: \"Canvas\", value: \"canvas\"},\n                    {label: \"WebGL\", value: \"webgl\"}\n                  ]}\n                  name=\"context\" />\n            </Grid>\n\n            <Grid item xs={12}>\n                <SwitchControl\n                  name=\"isRunning\" />\n            </Grid>\n\n            <Grid item xs={12}>\n                <SliderControl\n                  label=\"FOV\"\n                  min={0}\n                  max={200}\n                  name=\"fov\" />\n            </Grid>\n\n            <Grid item xs={12}>\n                <SliderControl\n                  label=\"Pitch\"\n                  min={-90}\n                  max={90}\n                  name=\"pitch\" />\n            </Grid>\n\n            <Grid item xs={12}>\n                <SliderControl\n                  label=\"Yaw\"\n                  min={-180}\n                  max={180}\n                  name=\"yaw\" />\n            </Grid>\n\n            <Grid container item xs={6} spacing={1}>\n                <Grid item xs={12}>\n                    <SliderControl\n                      label=\"Position X\"\n                      marks={[\n                        {label: \"-100\", value: -100},\n                        {label: \"0\", value: 0},\n                        {label: \"100\", value: 100}\n                      ]}\n                      min={-100}\n                      max={100}\n                      name=\"position.x\" />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <SliderControl\n                      label=\"Position Y\"\n                      marks={[\n                        {label: \"-100\", value: -100},\n                        {label: \"0\", value: 0},\n                        {label: \"100\", value: 100}\n                      ]}\n                      min={-100}\n                      max={100}\n                      name=\"position.y\" />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <SliderControl\n                      label=\"Position Z\"\n                      marks={[\n                        {label: \"-100\", value: -100},\n                        {label: \"0\", value: 0},\n                        {label: \"100\", value: 100}\n                      ]}\n                      min={-100}\n                      max={100}\n                      name=\"position.z\" />\n                </Grid>\n            </Grid>\n\n            <Grid container item xs={6} spacing={1}>\n                <Grid item xs={12}>\n                    <SliderControl\n                      label=\"Direction X\"\n                      marks={[\n                        {label: \"-1\", value: -1},\n                        {label: \"0\", value: 0},\n                        {label: \"1\", value: 1}\n                      ]}\n                      min={-1}\n                      max={1}\n                      step={0.01}\n                      name=\"direction.x\" />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <SliderControl\n                      label=\"Direction Y\"\n                      marks={[\n                        {label: \"-1\", value: -1},\n                        {label: \"0\", value: 0},\n                        {label: \"1\", value: 1}\n                      ]}\n                      min={-1}\n                      max={1}\n                      step={0.01}\n                      name=\"direction.y\" />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <SliderControl\n                      label=\"Direction Z\"\n                      marks={[\n                        {label: \"-1\", value: -1},\n                        {label: \"0\", value: 0},\n                        {label: \"1\", value: 1}\n                      ]}\n                      min={-1}\n                      max={1}\n                      step={0.01}\n                      name=\"direction.z\" />\n                </Grid>\n            </Grid>\n        </Grid>\n    );\n};\n\n\nexport {ConfigForm};\n","import React, {\n    useState,\n    useRef,\n    useCallback,\n    useEffect,\n    createContext,\n    PropsWithChildren\n} from \"react\";\nimport Drawer from \"@mui/material/Drawer\";\nimport Box from \"@mui/material/Box\";\nimport {Point, Observable} from \"motor-js\";\n\nimport {Form, FormElement} from \"src/blocks\";\nimport {ConfigForm} from \"../ConfigForm\";\n\n\ntype EventMap = {\n    changeContext: {data: Data;};\n    changeRunning: {data: Data;};\n    changeFov: {data: Data;};\n    changePitch: {data: Data;};\n    changeYaw: {data: Data;};\n    changePosition: {data: Data;};\n    changeDirection: {data: Data;};\n};\n\ntype Data = {\n    context: \"svg\" | \"canvas\" | \"webgl\";\n    isRunning: boolean;\n    fov: number;\n    pitch: number;\n    yaw: number;\n    position: Point;\n    direction: Point;\n};\n\ntype ContextType = Data & {\n    setRunning: (isRunning: boolean) => void,\n    setFov: (fov: number) => void;\n    setPitch: (pitch: number) => void;\n    setYaw: (yaw: number) => void;\n    setDirection: (direction: Point) => void;\n    setPosition: (position: Point) => void;\n    setContext: (context: Data[\"context\"]) => void;\n    addEventListener: Observable<EventMap>[\"addEventListener\"];\n    removeEventListener: Observable<EventMap>[\"removeEventListener\"];\n};\n\nconst Context = createContext<ContextType>({\n    context: \"webgl\",\n    setContext() {},\n    isRunning: false,\n    setRunning() {},\n    fov: 100,\n    setFov() {},\n    pitch: 0,\n    setPitch() {},\n    yaw: 0,\n    setYaw() {},\n    direction: {x: 1, y: 0, z: 0},\n    setDirection() {},\n    position: {x: 0, y: 0, z: 0},\n    setPosition() {},\n    addEventListener() {},\n    removeEventListener() {}\n});\n\ntype Props = PropsWithChildren;\n\nconst ConfigProvider: React.FC<Props> = (props) => {\n    const {children} = props;\n\n    const [isOpen, setOpen] = useState(false);\n    const [isRunning, setRunning] = useState(true);\n    const [context, setContext] = useState<\"svg\"|\"canvas\"|\"webgl\">(\"canvas\");\n    const [fov, setFov] = useState(45);\n    const [pitch, setPitch] = useState(0);\n    const [yaw, setYaw] = useState(0);\n    const [position, setPosition] = useState<Point>({x: 0, y: 0, z: 300});\n    const [direction, setDirection] = useState<Point>({x: 0, y: 0, z: -1});\n    const observer = useRef<Observable<EventMap>>(new Observable<EventMap>());\n    const formRef = useRef<FormElement>(null);\n\n    const handleClose = useCallback(() => {\n        setOpen(false);\n    }, []);\n\n    const handleDiff = useCallback((prev: any, next: any): boolean => {\n        return JSON.stringify(prev) !== JSON.stringify(next);\n    }, []);\n\n    const handlePositionChange = useCallback((position: Point) => {\n        setPosition(position);\n    }, []);\n\n    const handleDirectionChange = useCallback((direction: Point) => {\n        setDirection(direction);\n    }, []);\n\n    const handleAddEventListener: Observable<EventMap>[\"addEventListener\"] = useCallback((type, listener) => {\n        observer.current.addEventListener(type, listener);\n    }, []);\n\n    const handleRemoveEventListener: Observable<EventMap>[\"removeEventListener\"] = useCallback((type, listener) => {\n        observer.current.removeEventListener(type, listener);\n    }, []);\n\n    const handleSubmit = useCallback((data: Data) => {\n        if(handleDiff(context, data.context)) {\n            setContext(data.context);\n            observer.current.emit(\"changeContext\", {data});\n        }\n\n        if(handleDiff(isRunning, data.isRunning)) {\n            setRunning(data.isRunning);\n            observer.current.emit(\"changeRunning\", {data});\n        }\n\n        if(handleDiff(position, data.position)) {\n            setPosition(data.position);\n            observer.current.emit(\"changePosition\", {data});\n        }\n\n        if(handleDiff(direction, data.direction)) {\n            setDirection(data.direction);\n            observer.current.emit(\"changeDirection\", {data});\n        }\n\n        if(handleDiff(fov, data.fov)) {\n            setFov(data.fov);\n            observer.current.emit(\"changeFov\", {data});\n        }\n\n        if(handleDiff(pitch, data.pitch)) {\n            setPitch(data.pitch);\n            observer.current.emit(\"changePitch\", {data});\n        }\n\n        if(handleDiff(yaw, data.yaw)) {\n            setYaw(data.yaw);\n            observer.current.emit(\"changeYaw\", {data});\n        }\n    }, [context, position, direction, fov, pitch, yaw, pitch]);\n\n    useEffect(() => {\n        const handleKeydown = (e: KeyboardEvent) => {\n            if(e.key === \"p\") {\n                setOpen((open) => !open);\n                e.preventDefault();\n            }\n        };\n\n        document.addEventListener(\"keydown\", handleKeydown);\n\n        return () => {\n            document.removeEventListener(\"keydown\", handleKeydown);\n        };\n    }, []);\n\n    return (\n        <Context.Provider\n          value={{\n            context,\n            setContext,\n            isRunning,\n            setRunning,\n            fov,\n            setFov,\n            pitch,\n            setPitch,\n            yaw,\n            setYaw,\n            direction,\n            setDirection: handleDirectionChange,\n            position,\n            setPosition: handlePositionChange,\n            addEventListener: handleAddEventListener,\n            removeEventListener: handleRemoveEventListener\n          }}>\n            <Drawer\n              sx={{\n                width: \"50vw\"\n              }}\n              PaperProps={{\n                sx: {\n                    width: \"50vw\",\n                    padding: 2\n                }\n              }}\n              open={isOpen}\n              anchor=\"right\"\n              onClose={handleClose}>\n                <Form\n                  ref={formRef}\n                  mode=\"onSubmit\"\n                  values={{\n                    context,\n                    isRunning,\n                    fov,\n                    pitch,\n                    yaw,\n                    position,\n                    direction\n                  }}\n                  shouldUnregister\n                  onChange={handleSubmit}>\n                    <Box sx={{paddingLeft: 2, paddingRight: 2}}>\n                        <ConfigForm />\n                    </Box>\n                </Form>\n            </Drawer>\n\n            {children}\n        </Context.Provider>\n    );\n};\n\n\nexport {\n    ConfigProvider,\n    Context as ConfigContext\n};\n","import {Model, Polygon, Point, BSPNode} from \"motor-js\";\n\n\nexport class Lines extends Model {\n    constructor(position?: Point) {\n        super(position);\n\n        this.points = [];\n        this.polygons = [];\n    }\n\n    public addPolygon(p: Polygon) {\n        const indexes: number[] = [];\n\n        for(let i = 0; i < p.points.length; i++) {\n            indexes.push(this.points.length);\n            this.points.push(p.points[i]);\n        }\n\n        this.polygons.push(indexes);\n    }\n\n    public addLine(start: Point, end: Point) {\n        const index = this.points.length;\n\n        this.points.push(start);\n        this.points.push(end);\n\n        this.polygons.push([index, index + 1]);\n    }\n\n    public getPolygons(): number[][] {\n        return this.polygons;\n    }\n}\n","import React, {\n    useState,\n    useRef,\n    useContext,\n    useCallback,\n    useEffect,\n    MouseEvent as RMouseEvent\n} from \"react\";\nimport {\n    Scene,\n    Cube,\n    Polygon,\n    CameraPositionChangeEvent,\n    CameraDirectionChangeEvent,\n    CameraFovChangeEvent\n} from \"motor-js\";\n\nimport {ConfigContext} from \"../ConfigProvider\";\nimport {Lines} from \"../../models/Lines\";\n\n\nconst PathBuilder: React.FC = () => {\n    const [isLocked, setLocked] = useState(false);\n    const rootRef = useRef(null);\n    const sceneRef = useRef<Scene>();\n    const config = useContext(ConfigContext);\n\n    const handleClick = useCallback(() => {\n        if(!sceneRef.current) {\n            return;\n        }\n\n        sceneRef.current.requestPointerLock();\n    }, []);\n\n    const handleContextMenu = useCallback((e: RMouseEvent) => {\n        const scene = sceneRef.current;\n\n        if(!scene) {\n            return;\n        }\n\n        console.clear();\n        scene.debug();\n\n        e.preventDefault();\n        e.stopPropagation();\n    }, []);\n\n    useEffect(() => {\n        if(!rootRef.current) {\n            return;\n        }\n\n        const scene = sceneRef.current = new Scene(config.context);\n        (window as any).scene = scene;\n        (window as any).context = scene.getContext();\n        const camera = scene.getCamera();\n\n        camera.setPitch(config.pitch);\n        camera.setYaw(config.yaw);\n        camera.setPosition(config.position);\n        camera.setFov(config.fov);\n\n        const lines = new Lines({x: 0, y: 0, z: 0});\n\n        const a = new Polygon([\n            {x: -100, y: -10, z: -10},\n            {x: 0, y: 90, z: -10},\n            {x: 100, y: -10, z: -10}\n        ]);\n        a.setId(\"a\");\n\n        const b = new Polygon([\n            {x: -10, y: 0, z: -90},\n            {x: -10, y: 120, z: 0},\n            {x: -10, y: 0, z: 90}\n        ]);\n        b.setId(\"b\");\n\n        const c = new Polygon([\n            {x: -30, y: 0, z: -20},\n            {x: -20, y: 50, z: 0},\n            {x: -10, y: 0, z: -10}\n        ]);\n        c.setId(\"c\");\n\n        lines.addPolygon(b);\n        lines.addPolygon(a);\n        lines.addPolygon(c);\n        lines.addPolygon(new Polygon([\n            {x: 100, y: -30, z: 100},\n            {x: 100, y: -30, z: -100},\n            {x: -100, y: -30, z: -100},\n            {x: -100, y: -30, z: 100}\n        ]));\n\n        // scene.add(new Cube(100, 100, 100), {x: 0, y: 0, z: 0}, \"cube\");\n        // scene.add(new Cube(200, 1, 200), {x: 0, y: -100, z: 0}, \"ground\");\n        lines.setId(\"lines\");\n\n        scene.add(lines);\n\n        scene.add(new Cube(100, 100, 100), {x: 0, y: 0, z: 0}, \"cube\");\n        // scene.add(new Cube(200, 1, 200), {x: 0, y: -55, z: 0}, \"ground\");\n        scene.add(new Cube(1, 400, 400), {x: -120, y: 0, z: 0}, \"fance\");\n\n        // for(let i = -7; i <= 7; i++) {\n        //     for(let j = -7; j <= 7; j++) {\n        //         scene.add(new Cube(200, 1, 200), {x: 200 * i, y: -2000, z: 200 * j});\n        //         scene.add(new Cube(200, 1, 200), {x: 200 * i, y: 2000, z: 200 * j});\n        //     }\n        // }\n\n        scene.run(rootRef.current);\n\n        return () => {\n            scene.stop();\n        };\n    }, [config.context]);\n\n    useEffect(() => {\n        const handleLockChange = () => {\n            const locked = !!document.pointerLockElement;\n\n            setLocked(locked);\n        };\n\n        const handleF = (e: KeyboardEvent) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            if(e.key !== \"f\") {\n                return;\n            }\n\n            console.clear();\n            sceneRef.current.debug();\n\n            e.preventDefault();\n        };\n\n        const handleChangeContext = (e: KeyboardEvent) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            if(!e.altKey) {\n                return;\n            }\n\n            switch(e.key) {\n                case \"1\":\n                    config.setContext(\"svg\");\n                    break;\n\n                case \"2\":\n                    config.setContext(\"canvas\");\n                    break;\n\n                case \"3\":\n                    config.setContext(\"webgl\");\n                    break;\n\n                default:\n                    return;\n            }\n\n            e.preventDefault();\n        };\n\n        document.addEventListener(\"pointerlockchange\", handleLockChange);\n        document.addEventListener(\"keydown\", handleF);\n        document.addEventListener(\"keydown\", handleChangeContext);\n\n        return () => {\n            document.removeEventListener(\"pointerlockchange\", handleLockChange);\n            document.removeEventListener(\"keydown\", handleF);\n            document.removeEventListener(\"keydown\", handleChangeContext);\n        };\n    }, []);\n\n    useEffect(() => {\n        let forwardInterval: NodeJS.Timeout;\n        let backInterval: NodeJS.Timeout;\n        let leftInterval: NodeJS.Timeout;\n        let rightInterval: NodeJS.Timeout;\n        let upInterval: NodeJS.Timeout;\n        let downInterval: NodeJS.Timeout;\n\n        const handleDown = (e: KeyboardEvent) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            const scene = sceneRef.current;\n            const camera = scene.getCamera();\n            let position = camera.getPosition();\n\n            switch(e.key) {\n                case \"ArrowUp\":\n                    camera.setPosition({\n                        ...position,\n                        z: position.z + 1\n                    });\n                    break;\n\n                case \"ArrowDown\":\n                    camera.setPosition({\n                        ...position,\n                        z: position.z - 1\n                    });\n                    break;\n\n                case \"ArrowLeft\":\n                    camera.setPosition({\n                        ...position,\n                        x: position.x + 1\n                    });\n                    break;\n\n                case \"ArrowRight\":\n                    camera.setPosition({\n                        ...position,\n                        x: position.x - 1\n                    });\n                    break;\n\n                case \"w\": {\n                    clearInterval(forwardInterval);\n                    forwardInterval = setInterval(() => {\n                        const camera = scene.getCamera();\n\n                        camera.setPosition({\n                            x: camera.getPosition().x - camera.getDirection().x,\n                            y: camera.getPosition().y - camera.getDirection().y,\n                            z: camera.getPosition().z - camera.getDirection().z\n                        });\n                    }, 0);\n\n                    e.preventDefault();\n                    e.stopPropagation();\n                    break;\n                }\n\n                case \"a\": {\n                    clearInterval(leftInterval);\n                    leftInterval = setInterval(() => {\n                        const camera = scene.getCamera();\n\n                        camera.setPosition({\n                            x: camera.getPosition().x + camera.getDirectionLeft().x,\n                            y: camera.getPosition().y + camera.getDirectionLeft().y,\n                            z: camera.getPosition().z + camera.getDirectionLeft().z\n                        });\n                    }, 0);\n                    e.preventDefault();\n                    e.stopPropagation();\n                    break;\n                }\n\n                case \"d\": {\n                    clearInterval(rightInterval);\n                    rightInterval = setInterval(() => {\n                        const camera = scene.getCamera();\n                        camera.setPosition({\n                            x: camera.getPosition().x - camera.getDirectionLeft().x,\n                            y: camera.getPosition().y - camera.getDirectionLeft().y,\n                            z: camera.getPosition().z - camera.getDirectionLeft().z\n                        });\n                    }, 0);\n                    e.preventDefault();\n                    e.stopPropagation();\n                    break;\n                }\n\n                case \"s\": {\n                    clearInterval(backInterval);\n                    backInterval = setInterval(() => {\n                        const camera = scene.getCamera();\n\n                        camera.setPosition({\n                            x: camera.getPosition().x + camera.getDirection().x,\n                            y: camera.getPosition().y + camera.getDirection().y,\n                            z: camera.getPosition().z + camera.getDirection().z\n                        });\n                    }, 0);\n\n                    e.preventDefault();\n                    e.stopPropagation();\n                    break;\n                }\n\n                case \"q\": {\n                    clearInterval(downInterval);\n                    downInterval = setInterval(() => {\n                        const camera = scene.getCamera();\n                        const position = camera.getPosition();\n\n                        camera.setPosition({\n                            ...position,\n                            y: position.y - 1\n                        });\n                    }, 0);\n\n                    e.preventDefault();\n                    e.stopPropagation();\n                    break;\n                }\n\n                case \"e\": {\n                    clearInterval(upInterval);\n                    upInterval = setInterval(() => {\n                        const camera = scene.getCamera();\n                        const position = camera.getPosition();\n\n                        camera.setPosition({\n                            ...position,\n                            y: position.y + 1\n                        });\n                    }, 0);\n                    e.preventDefault();\n                    e.stopPropagation();\n                    break;\n                }\n            }\n        };\n\n        const handleUp = (e: KeyboardEvent) => {\n            switch(e.key) {\n                case \"w\":\n                    clearInterval(forwardInterval);\n                    break;\n\n                case \"a\":\n                    clearInterval(leftInterval);\n                    break;\n\n                case \"d\":\n                    clearInterval(rightInterval);\n                    break;\n\n                case \"s\":\n                    clearInterval(backInterval);\n                    break;\n\n                case \"q\":\n                    clearInterval(downInterval);\n                    break;\n\n                case \"e\":\n                    clearInterval(upInterval);\n                    break;\n            }\n        };\n\n        document.addEventListener(\"keypress\", handleDown);\n        document.addEventListener(\"keyup\", handleUp);\n\n        return () => {\n            document.removeEventListener(\"keypress\", handleDown);\n            document.removeEventListener(\"keyup\", handleUp);\n        };\n    }, []);\n\n    useEffect(() => {\n        if(!isLocked) {\n            return;\n        }\n\n        const handleMove = (e: MouseEvent) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            const camera = sceneRef.current.getCamera();\n\n            camera.setDirectionFromAngles(\n                camera.getPitch() + e.movementY * 0.1,\n                camera.getYaw() - e.movementX * 0.1\n            );\n        };\n\n        document.addEventListener(\"mousemove\", handleMove);\n\n        return () => {\n            document.removeEventListener(\"mousemove\", handleMove);\n        };\n    }, [isLocked]);\n\n    useEffect(() => {\n        if(!sceneRef.current) {\n            return;\n        }\n\n        const camera = sceneRef.current.getCamera();\n\n        const handlePositionChange = (e: CameraPositionChangeEvent) => {\n            const {position} = e;\n\n            config.setPosition(position);\n        };\n\n        const handleChangeDirection = (e: CameraDirectionChangeEvent) => {\n            const {\n                direction,\n                yaw,\n                pitch\n            } = e;\n\n            config.setDirection(direction);\n            config.setPitch(pitch);\n            config.setYaw(yaw);\n        };\n\n        const handleFovChange = (e: CameraFovChangeEvent) => {\n            const {\n                fov\n            } = e;\n\n            config.setFov(fov);\n        };\n\n        // const handlePitchChange = () => {};\n\n        camera.addEventListener(\"positionChange\", handlePositionChange);\n        camera.addEventListener(\"directionChange\", handleChangeDirection);\n        camera.addEventListener(\"fovChange\", handleFovChange);\n        // camera.addEventListener(\"\");\n\n        return () => {\n            camera.removeEventListener(\"positionChange\", handlePositionChange);\n            camera.removeEventListener(\"directionChange\", handleChangeDirection);\n            camera.removeEventListener(\"fovChange\", handleFovChange);\n        };\n    }, [config]);\n\n    useEffect(() => {\n        const handleRunningChange = (e) => {\n            if(!rootRef.current || !sceneRef.current) {\n                return;\n            }\n\n            const scene = sceneRef.current;\n\n            if(!e.data.isRunning) {\n                scene.stop();\n            }\n            else {\n                scene.run(rootRef.current);\n            }\n        };\n\n        const handleChangePosition = (e) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            const camera = sceneRef.current.getCamera();\n\n            const {\n                data: {\n                    position\n                }\n            } = e;\n\n            camera.setPosition(position);\n        };\n\n        const handleDirectionChange = (e) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            const camera = sceneRef.current.getCamera();\n\n            const {\n                data: {\n                    direction\n                }\n            } = e;\n\n            camera.setDirection(direction);\n        };\n\n        const handleFovChange = (e) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            const camera = sceneRef.current.getCamera();\n\n            const {\n                data: {\n                    fov\n                }\n            } = e;\n\n            camera.setFov(fov);\n        };\n\n        const handlePitchChange = (e) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            const camera = sceneRef.current.getCamera();\n\n            const {\n                data: {\n                    pitch\n                }\n            } = e;\n\n            camera.setPitch(pitch);\n        };\n\n        const handleYawChange = (e) => {\n            if(!sceneRef.current) {\n                return;\n            }\n\n            const camera = sceneRef.current.getCamera();\n\n            const {\n                data: {\n                    yaw\n                }\n            } = e;\n\n            camera.setYaw(yaw);\n        };\n\n        config.addEventListener(\"changeRunning\", handleRunningChange);\n        config.addEventListener(\"changePosition\", handleChangePosition);\n        config.addEventListener(\"changeDirection\", handleDirectionChange);\n        config.addEventListener(\"changeFov\", handleFovChange);\n        config.addEventListener(\"changeYaw\", handleYawChange);\n        config.addEventListener(\"changePitch\", handlePitchChange);\n\n        return () => {\n            config.removeEventListener(\"changeRunning\", handleRunningChange);\n            config.removeEventListener(\"changePosition\", handleChangePosition);\n            config.removeEventListener(\"changeDirection\", handleDirectionChange);\n            config.removeEventListener(\"changeFov\", handleFovChange);\n            config.removeEventListener(\"changeYaw\", handleYawChange);\n            config.removeEventListener(\"changePitch\", handlePitchChange);\n        };\n    }, [config]);\n\n    return (\n        <div\n          ref={rootRef}\n          style={{\n            width: \"100%\",\n            height: \"calc(100vh - 55px)\"\n          }}\n          onClick={handleClick}\n          onContextMenu={handleContextMenu} />\n    );\n};\n\n\nexport {PathBuilder};\n","import React from \"react\";\n\nimport {\n    ConfigProvider,\n    PathBuilder\n} from \"./blocks\";\n\n\nconst PathBuilderPage: React.FC = () => {\n    return (\n        <ConfigProvider>\n            <PathBuilder />\n        </ConfigProvider>\n    );\n};\n\n\nexport default PathBuilderPage;\n"],"names":["Context","this","width","height","fov","models","debug","prototype","setDebug","getWidth","getHeight","setSizes","setWidth","setHeight","getFov","setFov","addModel","model","push","removeModel","filter","m","Vector","x","y","z","Object","defineProperty","get","distance","enumerable","configurable","set","point","add","summary","multiply","by","sub","subtract","normalize","_a","toPoint","fromPoint","a","b","cross","Math","sqrt","pow","distanceBetween","v","length","magnitude","dot","angle","v1","v2","mag1","mag2","acos","intersectPlaneV1","direction","v0","edge1","edge2","planeNormal","denominator","abs","t","intersectPlaneV2","normal","d","denom","intersectPolygon","polygon","getNormal","points","isNaN","isFinite","intersectPoint","console","log","i","p1","p2","side1","side2","crossProduct","areCoDirected","areCoDirectedV2","areCoDirectedV1","pt1","pt2","ratioX","ratioY","ratioZ","epsilon","getAngle","cosAngle","PI","cos","Polygon2D","getCenter","center","calcCenter","__spreadArray","to","from","pack","arguments","ar","l","Array","slice","call","concat","Polygon","calcNormal","setId","id","intersects","_i","axes_1","getNormals","axis","projection1","projection","projection2","max","min","smooth","p3","vector1","vector2","getVector1","getVector2","isInFront","vector","isOnSamePlane","p","isContainPoint","isContainPointV3","isContainPointV1","inside","dot00","dot01","dot02","dot11","dot12","invDenom","u","isContainPointV2","sum","a1","a2","project","camera","map","projectPoint","isIntersect","A","B","intersect","before","after","isBefore","j","b1","b2","b3","ABefore","color","AAfter","normals","edge","BSPNode","polygons","front","back","sort","root","rest","rest_1","_b","intersects_1","type","classifyPolygon","isInFrontV1","isInFrontV2","viewVector","traverse","render","traverseV1","traverseV2","frontFirst","p4","d3","d4","apply","__extends","extendStatics","setPrototypeOf","__proto__","hasOwnProperty","TypeError","String","__","constructor","create","CanvasContext","_super","_this","canvas","document","createElement","context","getContext","NaN","setStrokeStyle","strokeStyle","setFillStyle","fillStyle","drawLine","start","end","lineWidth","beginPath","moveTo","lineTo","stroke","closePath","drawPolygon","fillRect","w","h","fillPolygon","fill","clear","clearRect","renderPolygons","SVGContext","svg","createElementNS","setAttribute","createSVGElement","line","appendChild","rect","join","append","firstChild","removeChild","Observable","listeners","addEventListener","listener","removeEventListener","index","indexOf","splice","emit","event","forEach","Camera","position","isDebug","pitch","yaw","roll","rotationMatrix","calcDirectionMatrix","getPosition","setPosition","up","right","newUp","calcCameraRotationMatrixV2","getProjectionMatrix","fieldOfView","aspect","projectionMatrix","mat4","matrix","transformPointToCameraView","projected","projectPointV2","projectPointV1","scale","getDirection","getDirectionLeft","setDirection","setDirectionFromAngles","pitchRadians","yawRadians","sin","getPitch","setPitch","getYaw","setYaw","getRoll","setRoll","Model","rotation","rotationDirection","getId","getPoints","getRotatedPoint","getPolygons","getPolygons2","indexes","getScale","setScale","rotate","rotationAngle","sinAngle","Color","parse","parseRgb","parseHsl","parseHsla","parseInt","match","hue","saturation","lightness","c","r","g","alpha","parseFloat","WebGLContext","Error","program","initShaderProgram","vertexShader","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","getModelViewMatrix","modelViewMatrix","polygons_1","positionBuffer","createBuffer","positions","flat","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","colors","colorBuffer","indexBuffer","indices","_","ELEMENT_ARRAY_BUFFER","Uint16Array","vertexAttribPointer","getAttribLocation","FLOAT","enableVertexAttribArray","useProgram","uniformMatrix4fv","getUniformLocation","vertexCount","drawElements","TRIANGLES","UNSIGNED_SHORT","viewport","DataProvider","getModels","Scene","isLooping","dataProvider","getCamera","requestPointerLock","domElement","debugger","update","modelIndex","polygonIndex","polygonPoints","remove","run","getBoundingClientRect","loop","stop","window","requestAnimationFrame","Dispatchable","dispatch","Sphere","radius","Cube","depth","useControl","props","name","formState","isSubmitting","useFormContext","field","useController","disabled","ButtonGroupControl","label","options","value","onChange","_jsx","ButtonGroup","title","children","option","Button","onClick","SliderControl","required","marks","step","handleChange","useCallback","e","_jsxs","Grid","container","spacing","alignItems","item","justifyContent","toFixed","xs","Slider","SwitchControl","ref","onBlur","checked","Switch","ConfigForm","createContext","setContext","isRunning","setRunning","ConfigProvider","isOpen","setOpen","useState","observer","useRef","formRef","handleClose","handleDiff","prev","next","JSON","stringify","handlePositionChange","handleDirectionChange","handleAddEventListener","current","handleRemoveEventListener","handleSubmit","data","useEffect","handleKeydown","key","open","preventDefault","Provider","Drawer","sx","PaperProps","padding","anchor","onClose","Form","mode","values","shouldUnregister","Box","paddingLeft","paddingRight","Lines","super","addPolygon","addLine","PathBuilder","isLocked","setLocked","rootRef","sceneRef","config","useContext","ConfigContext","handleClick","handleContextMenu","scene","stopPropagation","lines","handleLockChange","locked","pointerLockElement","handleF","handleChangeContext","altKey","forwardInterval","backInterval","leftInterval","rightInterval","upInterval","downInterval","handleDown","clearInterval","setInterval","handleUp","handleMove","movementY","movementX","handleChangeDirection","handleFovChange","handleRunningChange","handleChangePosition","handlePitchChange","handleYawChange","style","onContextMenu","PathBuilderPage"],"sourceRoot":""}